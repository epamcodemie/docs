<article class="doc">
 <h1 class="page">
  Shared Resources (Mule Domains)
 </h1>
 <div id="preamble">
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     When you deploy Mule on premises, you can define global configurations such as shared properties, scheduler pools, and connector configurations to be shared among all applications deployed under the same domain. To do so, create a Mule domain and then reference it from each application. As a result, each app now associated with the Mule domain can access shared resources in the domain.
     <br/>
     Note that Mule apps are associated with only one domain at a time.
    </p>
   </div>
   <div class="paragraph">
    <p>
     Using domains greatly enhances performance when you deploy multiple services on the same on-premises Mule runtime engine (Mule). By providing a centralized point for all the shared resources, domains make the class-loading process (and, therefore, metaspace memory usage) more efficient, especially because domain dependencies declared in the
     <code>
      pom.xml
     </code>
     file are also shared in the domain apps.
    </p>
   </div>
   <div class="paragraph">
    <p>
     Sharing resources allows multiple development teams to work in parallel using the same set of connector configurations, enabling the teams to:
    </p>
   </div>
   <div class="ulist">
    <ul>
     <li>
      <p>
       Expose multiple services within the domain through the same port.
      </p>
     </li>
     <li>
      <p>
       Share the connection to persistent storage.
      </p>
     </li>
     <li>
      <p>
       Share services between Mule applications through a well-defined interface.
      </p>
     </li>
     <li>
      <p>
       Ensure consistency between Mule applications upon any changes because the configuration is only set in one place.
      </p>
     </li>
    </ul>
   </div>
   <div class="paragraph">
    <p>
     To share the metadata, keep the Mule domain project open in Anypoint Studio. Otherwise, you must enter the metadata manually on the linked Mule projects.
    </p>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="prerequisites">
   <a class="anchor" href="#prerequisites">
   </a>
   Prerequisites
  </h2>
  <div class="sectionbody">
   <div class="ulist">
    <ul>
     <li>
      <p>
       Anypoint Studio 7.x
      </p>
     </li>
     <li>
      <p>
       Mule runtime engine 4.x
      </p>
     </li>
     <li>
      <p>
       Run Mule runtime engine On Premises
      </p>
     </li>
    </ul>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="limitations">
   <a class="anchor" href="#limitations">
   </a>
   Limitations
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Defining flows, subflows, or any message processors as shared resources is not supported. Domains are not meant to share behavior. They are meant to share resources only.
    </p>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="architecture">
   <a class="anchor" href="#architecture">
   </a>
   Architecture
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     A Mule domain project in Anypoint Studio has the following key files:
    </p>
   </div>
   <table class="tableblock frame-all grid-all fit-content spread">
    <colgroup>
     <col/>
     <col/>
    </colgroup>
    <thead>
     <tr>
      <th class="tableblock halign-left valign-top">
       File Name
      </th>
      <th class="tableblock halign-left valign-top">
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           /src/main/mule/mule-domain-config.xml
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          This is the shared resources configuration file. This file must have the
          <code>
           mule-domain-config.xml
          </code>
          file name.
         </p>
        </div>
       </div>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           pom.xml
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          This is the dependencies file descriptor. It is a Maven POM file with required plugins for domains projects.
         </p>
        </div>
       </div>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           /mule-artifact.json
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          This file is a descriptor for the domain artifact.
         </p>
        </div>
       </div>
      </td>
     </tr>
    </tbody>
   </table>
   <div class="paragraph">
    <p>
     When you package the Mule domain project into a deployable JAR file, you can find the following files:
    </p>
   </div>
   <table class="tableblock frame-all grid-all fit-content spread">
    <colgroup>
     <col/>
     <col/>
    </colgroup>
    <thead>
     <tr>
      <th class="tableblock halign-left valign-top">
       File Name
      </th>
      <th class="tableblock halign-left valign-top">
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           mule-domain-config.xml
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          This is the shared resources configuration file. This file must have the
          <code>
           mule-domain-config.xml
          </code>
          file name.
         </p>
        </div>
       </div>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           /repository
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          A Maven-like repository with all the dependencies of the domain.
         </p>
        </div>
       </div>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           /META-INF/maven/groupId/artifactId/pom.xml
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          Artifact Maven descriptor file.
         </p>
        </div>
       </div>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           /META-INF/mule-artifact/classloader-model.json
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          Internal Mule file used for dependency management.
         </p>
        </div>
       </div>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          <code>
           /META-INF/mule-artifact/mule-artifact.json
          </code>
         </p>
        </div>
       </div>
      </td>
      <td class="tableblock halign-left valign-top">
       <div class="content">
        <div class="paragraph">
         <p>
          This file is a descriptor for the domain artifact.
         </p>
        </div>
       </div>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
 </div>
 <div class="sect1">
  <h2 id="configuration">
   <a class="anchor" href="#configuration">
   </a>
   Configuration
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     To use shared resources in your Mule apps, complete the following tasks:
    </p>
   </div>
   <div class="olist arabic">
    <ol class="arabic">
     <li>
      <p>
       <a href="#create_domain_project">
        Create a new domain
       </a>
       .
      </p>
     </li>
     <li>
      <p>
       <a href="#define-shared-resources">
        Define one or more shared resources in that domain
       </a>
       .
      </p>
     </li>
     <li>
      <p>
       <a href="#assoc_apps_domain">
        Associate applications with the domain
       </a>
       .
      </p>
     </li>
     <li>
      <p>
       <a href="#reference-shared-resources">
        Reference shared resources
       </a>
       in your Mule applications.
      </p>
     </li>
     <li>
      <p>
       <a href="#deploy-shared-resources">
        Deploy the domain and the Mule apps with shared resources
       </a>
       .
       <br/>
      </p>
     </li>
    </ol>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="create_domain_project">
   <a class="anchor" href="#create_domain_project">
   </a>
   Create a New Domain
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     To create a new domain in Anypoint Studio:
    </p>
   </div>
   <div class="olist arabic">
    <ol class="arabic">
     <li>
      <p>
       In the top menu bar select,
       <strong>
        File
       </strong>
       &gt;
       <strong>
        New
       </strong>
       &gt;
       <strong>
        Mule Domain Project
       </strong>
       .
      </p>
      <div class="imageblock">
       <div class="content">
        <img alt="Menu options for managing Mule projects and domains" src="_images/mruntime-new-domain.png"/>
       </div>
      </div>
     </li>
     <li>
      <p>
       Fill in the same fields as you would with a regular Mule Project:
      </p>
      <div class="imageblock">
       <div class="content">
        <img alt="A new Mule domain with runtime version options" src="_images/mruntime-create-domain.png"/>
       </div>
      </div>
      <div class="ulist">
       <ul>
        <li>
         <p>
          Provide a name for the project, and select a Mule version.
         </p>
        </li>
       </ul>
      </div>
     </li>
    </ol>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="define-shared-resources">
   <a class="anchor" href="#define-shared-resources">
   </a>
   Shared Resources Configuration
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     You can configure your
     <a href="#create_domain_project">
      domain project
     </a>
     by defining one or more shared resources in your
     <code>
      mule-domain-config.xml
     </code>
     file. You can edit this file in Anypoint Studio using either the XML editor or the graphic interface.
    </p>
   </div>
   <div class="sect2">
    <h3 id="configure-shared-resources-by-editing-the-configuration-xml">
     <a class="anchor" href="#configure-shared-resources-by-editing-the-configuration-xml">
     </a>
     Configure Shared Resources by Editing the Configuration XML
    </h3>
    <div class="paragraph">
     <p>
      Configure shared resources by adding module or connector configurations to your domain’s configuration XML.
     </p>
    </div>
    <div class="paragraph">
     <p>
      The following example configures an HTTP Listener as a shared resource:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;domain:mule-domain
        xmlns="http://www.mulesoft.org/schema/mule/core"
        xmlns:domain="http://www.mulesoft.org/schema/mule/ee/domain"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
        xsi:schemaLocation="
               http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/ee/domain http://www.mulesoft.org/schema/mule/ee/domain/current/mule-domain-ee.xsd"&gt;

    &lt;!-- Example configuration for an HTTP Listener--&gt;
    &lt;http:listener-config name="HTTP_Listener_config" doc:name="HTTP Listener config" &gt;
      &lt;http:listener-connection host="0.0.0.0" port="8081" /&gt;
    &lt;/http:listener-config&gt;

&lt;/domain:mule-domain&gt;</code></pre>
     </div>
    </div>
   </div>
   <div class="sect2">
    <h3 id="configure-shared-resources-by-using-the-global-elements-tab">
     <a class="anchor" href="#configure-shared-resources-by-using-the-global-elements-tab">
     </a>
     Configure Shared Resources by Using the Global Elements Tab
    </h3>
    <div class="paragraph">
     <p>
      Configure shared resources by using the
      <strong>
       Global Elements
      </strong>
      tab in Anypoint Studio to first add a module to your domain project and then create a global element.
     </p>
    </div>
    <div class="paragraph">
     <p>
      For example, to add Anypoint Connector for HTTP (HTTP Connector) to your domain project:
     </p>
    </div>
    <div class="olist arabic">
     <ol class="arabic">
      <li>
       <p>
        In the
        <strong>
         Global Elements
        </strong>
        tab, click
        <strong>
         Manage Modules
        </strong>
        :
       </p>
       <div class="paragraph">
        <p>
         <span class="image">
          <img alt="An interface for managing modules in a Mule domain configuration" src="_images/mruntime-domain-manage-modules.png"/>
         </span>
        </p>
       </div>
      </li>
      <li>
       <p>
        Click
        <strong>
         Add Module
        </strong>
        :
       </p>
       <div class="paragraph">
        <p>
         <span class="image">
          <img alt="A configuration panel for adding modules to a project" src="_images/mruntime-domain-add-module.png"/>
         </span>
        </p>
       </div>
      </li>
      <li>
       <p>
        Search for the module you want to add and click
        <strong>
         Add &gt;
        </strong>
        :
       </p>
       <div class="paragraph">
        <p>
         <span class="image">
          <img alt="A search interface for adding modules from MuleSoft Exchange to a project" src="_images/mruntime-domain-add-module-finish.png"/>
         </span>
        </p>
       </div>
      </li>
      <li>
       <p>
        Click
        <strong>
         Finish
        </strong>
        .
       </p>
      </li>
     </ol>
    </div>
    <div class="paragraph">
     <p>
      After you add the HTTP connector to the domain project, you can create a global element to use as a shared resource:
     </p>
    </div>
    <div class="olist arabic">
     <ol class="arabic">
      <li>
       <p>
        In the
        <strong>
         Global Elements
        </strong>
        tab, click
        <strong>
         Create
        </strong>
        :
       </p>
       <div class="paragraph">
        <p>
         <span class="image">
          <img alt="An interface for creating and managing global configuration elements in a Mule domain" src="_images/mruntime-domain-create-config.png"/>
         </span>
        </p>
       </div>
      </li>
      <li>
       <p>
        Select the HTTP Connector and complete the configuration process:
       </p>
       <div class="paragraph">
        <p>
         <span class="image">
          <img alt="A menu for selecting global element types including HTTP and Sockets configurations" src="_images/mruntime-domain-connector-config.png"/>
         </span>
        </p>
       </div>
      </li>
      <li>
       <p>
        Define the configurable parameters of your global element in the
        <strong>
         Global Element Properties
        </strong>
        window.
       </p>
      </li>
     </ol>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="assoc_apps_domain">
   <a class="anchor" href="#assoc_apps_domain">
   </a>
   Associate Applications with a Domain
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Mule apps can be associated with only one domain at a time. You can associate an existing Mule app with a domain either by using Studio or by editing your project’s
     <code>
      pom.xml
     </code>
     file directly. If you don’t set a domain dependency, Mule applications use the
     <code>
      default
     </code>
     domain.
    </p>
   </div>
   <div class="paragraph">
    <p>
     Consider the following when working with Mule 4.2.2 and later versions:
    </p>
   </div>
   <div class="ulist">
    <ul>
     <li>
      <p>
       The version honors semantic versioning.
       <br/>
       For example, if you set the version to 1.0.1, a domain with version 1.0.2 and later works, but a domain with version 1.0.0 does not.
      </p>
     </li>
     <li>
      <p>
       If different domains are deployed with the same group ID, artifact ID, and version, the reference in the
       <code>
        pom.xml
       </code>
       file might be ambiguous.
       <br/>
       To avoid this issue, add the name of the domain folder in the Mule application’s
       <code>
        mule-artifact.json
       </code>
       file:
      </p>
     </li>
    </ul>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "domain": "mymuledomain-1.0.1-mule-domain"
  ...
}</code></pre>
    </div>
   </div>
   <div class="sect2">
    <h3 id="associate-a-mule-app-with-a-domain-using-studio">
     <a class="anchor" href="#associate-a-mule-app-with-a-domain-using-studio">
     </a>
     Associate a Mule App with a Domain Using Studio
    </h3>
    <div class="paragraph">
     <p>
      To associate a Mule application with a domain from Studio, follow these steps:
     </p>
    </div>
    <div class="olist arabic">
     <ol class="arabic">
      <li>
       <p>
        In the Project Explorer or Package Explorer view, right-click the Mule application.
       </p>
      </li>
      <li>
       <p>
        In the menu that opens, click
        <strong>
         Properties
        </strong>
        .
       </p>
      </li>
      <li>
       <p>
        From Properties, click
        <strong>
         Mule Project
        </strong>
        .
       </p>
      </li>
      <li>
       <p>
        In the
        <strong>
         Domain
        </strong>
        field, select a domain for your project.
       </p>
       <div class="imageblock">
        <div class="content">
         <img alt="Domain assignment options for a Mule project in Anypoint Studio" src="_images/assign-domain.png"/>
        </div>
       </div>
       <div class="paragraph">
        <p>
         Note that when you select a domain, the Mule runtime engine for your project matches the domain’s Mule runtime engine automatically.
        </p>
       </div>
      </li>
     </ol>
    </div>
    <div class="paragraph">
     <p>
      After completing these steps, Studio includes the domain in the
      <code>
       pom.xml
      </code>
      for your project, for example:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
  ...
  &lt;dependency&gt;
      &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
      &lt;artifactId&gt;mymuledomain&lt;/artifactId&gt;
      &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
      &lt;classifier&gt;mule-domain&lt;/classifier&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
     </div>
    </div>
   </div>
   <div class="sect2">
    <h3 id="associate-a-mule-app-with-a-domain-outside-studio">
     <a class="anchor" href="#associate-a-mule-app-with-a-domain-outside-studio">
     </a>
     Associate a Mule App with a Domain Outside Studio
    </h3>
    <div class="paragraph">
     <p>
      To associate a Mule app with a domain outside Studio, add the domain dependency to the
      <code>
       pom.xml
      </code>
      file as shown in the previous example.
     </p>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="reference-shared-resources">
   <a class="anchor" href="#reference-shared-resources">
   </a>
   Reference Shared Resources
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The following
     <code>
      mule-domain-config.xml
     </code>
     example defines HTTP listener and HTTP request configurations as shared resources.
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;mule-domain xmlns="http://www.mulesoft.org/schema/mule/domain"
             xmlns:core="http://www.mulesoft.org/schema/mule/core"
             xmlns:http="http://www.mulesoft.org/schema/mule/http"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="
               http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
                     http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
               http://www.mulesoft.org/schema/mule/domain http://www.mulesoft.org/schema/mule/domain/current/mule-domain.xsd"&gt;

    &lt;http:listener-config name="HTTP_Listener_Configuration"&gt;
        &lt;http:listener-connection host="0.0.0.0" port="8080"/&gt;
    &lt;/http:listener-config&gt;

    &lt;http:request-config name="domainLevel"&gt;
        &lt;http:request-connection host="localhost" port="9090"/&gt;
    &lt;/http:request-config&gt;

&lt;/mule-domain&gt;</code></pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     Any Mule application associated with the domain can make use of the shared resources by referencing them within the configuration in the same way that you reference a resource within the project itself. In the example that follows, the HTTP Listener connector references the shared resource named
     <code>
      HTTP_Listener_Configuration
     </code>
     .
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;mule&gt;
   &lt;flow name="httpService"&gt;
      &lt;http:listener config-ref="HTTP_Listener_Configuration" path="/" doc:name="HTTP"/&gt;
      &lt;set-payload value="success" /&gt;
   &lt;/flow&gt;
&lt;/mule&gt;</code></pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     In Studio’s visual editor, you can simply pick the shared resource out of the dropdown list in the
     <strong>
      Connector Configuration
     </strong>
     field of the connector’s properties editor:
    </p>
   </div>
   <div class="imageblock">
    <div class="content">
     <img alt="A configuration settings for an HTTP resource showing path and allowed methods" src="_images/pick-resource.png"/>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="deploy-shared-resources">
   <a class="anchor" href="#deploy-shared-resources">
   </a>
   Deploy with Shared Resources
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     By default, when you deploy either a Mule application associated with a domain or a domain associated with any Mule application, Anypoint Studio deploys both. You can change this default behavior by changing the run configuration for the domain. You can also deploy a set of Mule applications in your workspace together, even if they don’t share the same domain.
    </p>
   </div>
   <div class="admonitionblock note">
    <table>
     <tr>
      <td class="icon">
       <i class="fa icon-note" title="Note">
       </i>
      </td>
      <td class="content">
       Mule domain projects cannot be installed using Runtime Manager.
      </td>
     </tr>
    </table>
   </div>
   <div class="sect2">
    <h3 id="deploy-from-anypoint-studio">
     <a class="anchor" href="#deploy-from-anypoint-studio">
     </a>
     Deploy from Anypoint Studio
    </h3>
    <div class="paragraph">
     <p>
      The following steps describe how to deploy your domain project and the associated Mule applications from Studio:
     </p>
    </div>
    <div class="olist arabic">
     <ol class="arabic">
      <li>
       <p>
        Open the drop-down menu next to the play button and select
        <strong>
         Run Configurations
        </strong>
        .
       </p>
       <div class="imageblock">
        <div class="content">
         <img alt="Run configurations menu with options to manage and execute Mule projects" src="_images/mruntime-run-configuration.png"/>
        </div>
       </div>
      </li>
      <li>
       <p>
        Select the
        <strong>
         General
        </strong>
        tab and then select the boxes next to the projects that you want to always deploy together with the Mule application that is currently selected in the navigation menu to the right.
       </p>
       <div class="imageblock">
        <div class="content">
         <img alt="Run configuration properties with options for Mule applications and domains" src="_images/mruntime-run-configuration-properties.png"/>
        </div>
       </div>
      </li>
     </ol>
    </div>
   </div>
   <div class="sect2">
    <h3 id="deploy-outside-anypoint-studio">
     <a class="anchor" href="#deploy-outside-anypoint-studio">
     </a>
     Deploy Outside Anypoint Studio
    </h3>
    <div class="paragraph">
     <p>
      The following steps describe how to deploy your domain project and the Mule applications outside Studio, to a standalone Mule runtime engine:
     </p>
    </div>
    <div class="olist arabic">
     <ol class="arabic">
      <li>
       <p>
        In Studio, select
        <strong>
         File
        </strong>
        &gt;
        <strong>
         Export
        </strong>
        .
       </p>
      </li>
      <li>
       <p>
        Select
        <strong>
         Mule
        </strong>
        &gt;
        <strong>
         Anypoint Studio Project to Mule Deployable Archive (includes Studio metadata)
        </strong>
        .
        <br/>
        This process creates a JAR file that you can deploy to a standalone Mule runtime engine.
       </p>
       <div class="imageblock">
        <div class="content">
         <img alt="A menu for exporting projects from Anypoint Studio to various destinations" src="_images/mruntime-export-studio.png"/>
        </div>
       </div>
      </li>
      <li>
       <p>
        Copy the exported domain’s JAR file to
        <code>
         MULE_HOME/domains
        </code>
        .
       </p>
      </li>
      <li>
       <p>
        Export each Mule application that you want to deploy with the associated domain.
       </p>
      </li>
      <li>
       <p>
        Copy the exported JAR files for each Mule application that references the domain into the
        <code>
         MULE_HOME/apps
        </code>
        folder.
       </p>
      </li>
      <li>
       <p>
        Start Mule via the command console.
       </p>
       <div class="paragraph">
        <p>
         When Mule starts, it first deploys any domains found in the
         <code>
          MULE_HOME/domains
         </code>
         folder, then it deploys the Mule applications in the
         <code>
          MULE_HOME/apps
         </code>
         folder, so that all domains are fully started before the Mule  applications start.
        </p>
       </div>
      </li>
     </ol>
    </div>
   </div>
   <div class="sect2">
    <h3 id="deploying-domains-using-mule-maven-plugin">
     <a class="anchor" href="#deploying-domains-using-mule-maven-plugin">
     </a>
     Deploying Domains Using Mule Maven Plugin
    </h3>
    <div class="paragraph">
     <p>
      You can deploy domains to your local Mule instances using the Mule Maven plugin.
See
      <a class="xref page" href="deploy-on-premises#deploy-a-domain">
       Deploy a Domain
      </a>
      for instructions.
     </p>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="example-of-increased-performance-using-domains">
   <a class="anchor" href="#example-of-increased-performance-using-domains">
   </a>
   Example of Increased Performance Using Domains
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Imagine that you have a set of HTTP Proxy applications that also apply one API Gateway policy, such as an IP allow list. Each application interacts with the same backend. In a Mule instance configured to have 2 GB of heap memory and 256 MB of metaspace, deploying those applications independently without using a proper domain, results in a noticeable reduction in TPS (transactions per second) when deploying 60 or more applications due to saturated resources. At 80 applications, you see deployment issues due to out-of-memory exceptions.
     <br/>
     You can greatly improve this outcome by using a domain that shares the backend server configuration, increasing the number of applications to beyond 100 while also experiencing a balanced use of machine resources and consistent good performance.
    </p>
   </div>
   <div class="paragraph">
    <p>
     Note that despite the clear performance advantage in using domains, each deployed application adds its own unique complexity to the shared infrastructure resources. To avoid performance impact, before adding an application, identify the overhead by testing each application individually and then test it coexisting with other applications.
    </p>
   </div>
  </div>
 </div>
</article>
