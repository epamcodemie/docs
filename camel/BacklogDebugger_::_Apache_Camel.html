<article class="doc">
 <h1 class="page">
  BacklogDebugger
 </h1>
 <div id="preamble">
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Camel supports a backlog debugger that is used for live debugging of messages that are routed in Camel. The backlog debugger has additional functionality for easier debugging aimed at tooling, than the Debugger. The backlog debugger is exposed in JMX in the tracer node with the name
     <code>
      BacklogDebugger
     </code>
     . The JMX API is defined in the
     <code>
      org.apache.camel.api.management.mbean.ManagedBacklogDebuggerMBean
     </code>
     interface.
    </p>
   </div>
   <div class="paragraph">
    <p>
     You can enable or disable the BacklogDebugger dynamically, by calling
     <code>
      enableDebugger
     </code>
     or
     <code>
      disableDebugger
     </code>
     methods.
    </p>
   </div>
   <div class="admonitionblock note">
    <div class="table-wrapper">
     <table>
      <tr>
       <td class="icon">
        <i class="fa icon-note" title="Note">
        </i>
       </td>
       <td class="content">
        This requires to enabled JMX by including
        <code>
         camel-management
        </code>
        JAR in the classpath.
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_options">
   <a class="anchor" href="#_options">
   </a>
   Options
  </h2>
  <div class="sectionbody">
   <div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
     <colgroup>
      <col/>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th class="tableblock halign-left valign-top">
        Option
       </th>
       <th class="tableblock halign-left valign-top">
        Default
       </th>
       <th class="tableblock halign-left valign-top">
        Description
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          bodyIncludeFiles
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          true
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether to include the message body of file based messages. The overhead is that the file content has to be read from the file.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          bodyIncludeStreams
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          false
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether to include the message body of stream based messages. If enabled then beware the stream may not be re-readable later. See more about Stream Caching.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          bodyMaxChars
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          32kb
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To limit the message body to a maximum size in the traced message. Use 0 or negative value to use unlimited size.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          includeExchangeProperties
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          true
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether to include the exchange properties in the traced message.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          includeExchangeVariables
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          true
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether to include the exchange variables in the traced message.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          standby
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          false
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether the debugger is standby. If a debugger is in standby then the debugger is activated during startup and are ready to be enabled manually via JMX or calling the enableDebugger method.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          enabled
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          false
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether the debugger is enabled or not.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          singleStepMode
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          false
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether currently in single step mode of a single Exchange.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          singleStepLast
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          false
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         In single step mode, then when the exchange is complete, then simulate a breakpoint as last, that allows to suspend and watch the exchange when complete (you can see message body as response, failed exception etc).
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_operations">
   <a class="anchor" href="#_operations">
   </a>
   Operations
  </h2>
  <div class="sectionbody">
   <div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
     <colgroup>
      <col/>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th class="tableblock halign-left valign-top">
        Option
       </th>
       <th class="tableblock halign-left valign-top">
        Type
       </th>
       <th class="tableblock halign-left valign-top">
        Description
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          addBreakpoint(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To add a breakpoint at the given node.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          addConditionalBreakpoint(nodeId, language, predicate)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To add a conditional breakpoint at the given node. The predicate is created from the language parameter.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          disableBreakpoint(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To disable a breakpoint.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          disableDebugger
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To disable the debugger
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          dumpTracedMessagesAsXml(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          String
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To dump the debugged messages from the give node id in XML format.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          dumpTracedMessagesAsXml(nodeId, boolean)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          String
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To dump the debugged messages from the give node id in XML format, optionally including the exchange properties.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          enableBreakpoint(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To activate a breakpoint which has been disabled.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          enableDebugger
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To enable the debugger
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          evaluateExpressionAtBreakpoint(nodeId, language, expression)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          String
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To evaluate an expression in any supported language (e.g. Simple, CSimple, etc.) and convert the result to String
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          evaluateExpressionAtBreakpoint(nodeId, language, expression, resultType)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          Object
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To evaluate an expression in any supported language (e.g. Simple, CSimple, etc.) and return the result as a given result type
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          getBreakpoints
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          Set&lt;String&gt;
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To get a set of all the nodes which has a breakpoint added.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          getDebuggerCounter
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          long
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Gets the total number of debugged messages.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          getSuspendedBreakpointNodeIds
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          Set&lt;String&gt;
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To get a set of all the nodes which has suspended breakpoints (eg an Exchange at the breakpoint which is suspended).
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          removeBreakpoint(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To remove the breakpoint from the given node id.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          resetDebuggerCounter
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To reset the debugger counter.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          resumeAll
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To resume all suspended breakpoints.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          resumeBreakpoint(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To resume a suspend breakpoint, which will then continue routing the Exchange.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          setExchangePropertyOnBreakpoint(nodeId,exchangePropertyName,value)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To update/add the Exchange property on the suspended Exchange at the node.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          setFallbackTimeout(value)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          long
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Fallback Timeout in seconds (300 seconds as default) when block the message processing in Camel. A timeout used for waiting for a message to arrive at a given breakpoint. `
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          setMessageBodyOnBreakpoint(nodeId,body)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To update the message body on the suspended Exchange at the node.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          setMessageHeaderOnBreakpoint(nodeId,headerName,value)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To update/add the message header on the suspended Exchange at the node.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          stepBreakpoint(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To start single step mode from a suspended breakpoint at the given node. Then invoke
         <code>
          step
         </code>
         to step to next node in the route.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          step
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          void
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To step to next node when in single step mode.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          validateConditionalBreakpoint
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          String
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Used for validating if a given predicate is valid or not. Returns null if valid, otherwise a string with the error message.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          messageHistoryOnBreakpointAsXml(nodeId)
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          String
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Returns message history at the given node Id in XML format
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_enabling">
   <a class="anchor" href="#_enabling">
   </a>
   Enabling
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     You would need to enable backlogger debugger using the JMX API.
    </p>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_see_also">
   <a class="anchor" href="#_see_also">
   </a>
   See Also
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     See
     <a class="xref page" href="debugger.html">
      Debugger
     </a>
    </p>
   </div>
  </div>
 </div>
</article>
