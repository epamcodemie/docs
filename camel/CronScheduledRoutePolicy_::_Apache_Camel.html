<article class="doc">
 <h1 class="page">
  CronScheduledRoutePolicy
 </h1>
 <div id="preamble">
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     <code>
      CronScheduledRoutePolicy
     </code>
     is a
     <a class="xref page" href="scheduledroutepolicy.html">
      ScheduledRoutePolicy
     </a>
     that facilitates route activation, deactivation, suspension and resumption of routes based on a
     <a class="xref page" href="../components/4.10.x/quartz-component.html">
      Quartz
     </a>
     cron trigger.
    </p>
   </div>
   <div class="admonitionblock tip">
    <div class="table-wrapper">
     <table>
      <tr>
       <td class="icon">
        <i class="fa icon-tip" title="Tip">
        </i>
       </td>
       <td class="content">
        <div class="paragraph">
         <div class="title">
          Relationship to the Quartz component
         </div>
         <p>
          All Scheduled route policies share the scheduler created by the
          <a class="xref page" href="../components/4.10.x/quartz-component.html">
           Quartz
          </a>
          component. In this way, scheduler, jobs and triggers can be managed in a common and consistent way.
         </p>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_using_cron_scheduled_route_policy">
   <a class="anchor" href="#_using_cron_scheduled_route_policy">
   </a>
   Using cron scheduled route policy
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     To use a
     <code>
      CronScheduledRoutePolicy
     </code>
     it is necessary to instantiate an object of the type
     <code>
      org.apache.camel.routepolicy.quartz.CronScheduledRoutePolicy
     </code>
     .
    </p>
   </div>
   <div class="paragraph">
    <p>
     To perform a route operation at a given time, the following information must be provided.
    </p>
   </div>
   <div class="sect2">
    <h3 id="_starting_a_route">
     <a class="anchor" href="#_starting_a_route">
     </a>
     Starting a route
    </h3>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Parameter Name
        </th>
        <th class="tableblock halign-left valign-top">
         Type
        </th>
        <th class="tableblock halign-left valign-top">
         Default Value
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          routeStartTime
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          the initial scheduled date and time as a Cron Expression for route start
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_stopping_a_route">
     <a class="anchor" href="#_stopping_a_route">
     </a>
     Stopping a route
    </h3>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Parameter Name
        </th>
        <th class="tableblock halign-left valign-top">
         Type
        </th>
        <th class="tableblock halign-left valign-top">
         Default Value
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          routeStopTime
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          the initial scheduled date and time as a Cron Expression for route stop
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          routeStopGracePeriod
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          int
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          10000
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          the time period to wait before initiating graceful route stop
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          routeStopTimeUnit
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          long
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          TimeUnit.MILLISECONDS
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          the time unit for the grace period expressed as
          <code>
           java.util.concurrent.TimeUnit
          </code>
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_suspending_a_route">
     <a class="anchor" href="#_suspending_a_route">
     </a>
     Suspending a route
    </h3>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Parameter Name
        </th>
        <th class="tableblock halign-left valign-top">
         Type
        </th>
        <th class="tableblock halign-left valign-top">
         Default Value
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          routeSuspendTime
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          the initial scheduled date and time as a Cron Expression for route suspension
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_resuming_a_route">
     <a class="anchor" href="#_resuming_a_route">
     </a>
     Resuming a route
    </h3>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Parameter Name
        </th>
        <th class="tableblock halign-left valign-top">
         Type
        </th>
        <th class="tableblock halign-left valign-top">
         Default Value
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          routeResumeTime
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          the initial scheduled date and time as a Cron Expression for route resumption
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_configuring_the_route_policy">
   <a class="anchor" href="#_configuring_the_route_policy">
   </a>
   Configuring the route policy
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Once the
     <code>
      org.apache.camel.routepolicy.quartz.CronScheduledRoutePolicy
     </code>
     is created it can be wired into the Camel route as follows:
    </p>
   </div>
   <div class="paragraph">
    <p>
     In Java:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CronScheduledRoutePolicy startPolicy = new CronScheduledRoutePolicy();
startPolicy.setRouteStartTime("*/3 * * * * ?");

from("direct:start")
    .routeId("testRoute").routePolicy(startPolicy).noAutoStartup()
    .to("mock:success");</code></pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     And with Spring XML:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="startPolicy" class="org.apache.camel.routepolicy.quartz.CronScheduledRoutePolicy"&gt;
    &lt;property name="routeStartTime" value="*/3 * * * * ?"/&gt;
&lt;/bean&gt;

&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
    &lt;route id="testRoute" routePolicyRef="startPolicy" autoStartup="false"&gt;
        &lt;from uri="direct:start"/&gt;
        &lt;to uri="mock:success"/&gt;
    &lt;/route&gt;
&lt;/camelContext&gt;</code></pre>
    </div>
   </div>
   <div class="admonitionblock important">
    <div class="table-wrapper">
     <table>
      <tr>
       <td class="icon">
        <i class="fa icon-important" title="Important">
        </i>
       </td>
       <td class="content">
        Notice how the route to be scheduled
        <strong>
         MUST
        </strong>
        be configured to not
        <a class="xref page" href="configuring-route-startup-ordering-and-autostartup.html">
         auto-startup
        </a>
        , to let the route scheduler take control of starting and stopping the route accordingly.
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_dependency">
     <a class="anchor" href="#_dependency">
     </a>
     Dependency
    </h3>
    <div class="paragraph">
     <p>
      Maven users will need to add a camel-quartz dependency to their
      <code>
       pom.xml
      </code>
      to avail this capability.
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-quartz&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</code></pre>
     </div>
    </div>
   </div>
  </div>
 </div>
</article>
