<article class="doc">
 <h1 class="page">
  Testing
 </h1>
 <div id="preamble">
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Testing is a crucial activity in any piece of software development or integration. Typically, Camel users would use various different technologies wired together in a variety of EIPs with different endpoints, languages, bean integration, and dependency injection, so itâ€™s easy for things to go wrong! Testing is the crucial weapon to ensure that things work as you would expect.
    </p>
   </div>
   <div class="paragraph">
    <p>
     Camel is a Java library, so you can easily wire up tests in JUnit. However, the Camel project has tried to make the testing of Camel as easy and powerful as possible, so we have introduced the following features.
    </p>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_testing_modules">
   <a class="anchor" href="#_testing_modules">
   </a>
   Testing modules
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The following modules are supported:
    </p>
   </div>
   <div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
     <colgroup>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th class="tableblock halign-left valign-top">
        Component
       </th>
       <th class="tableblock halign-left valign-top">
        Description
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          <a class="xref page" href="../components/4.10.x/others/test-junit5.html">
           camel-test-junit5
          </a>
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <strong>
          JUnit 5
         </strong>
         : Is an older standalone Java library letting you easily create Camel test cases using a single Java class for all your configuration and routing without.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          <a class="xref page" href="../components/4.10.x/others/test-main-junit5.html">
           camel-test-main-junit5
          </a>
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <strong>
          JUnit 5
         </strong>
         : Used for testing Camel in Camel Main mode
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          <a class="xref page" href="../components/4.10.x/others/test-spring-junit5.html">
           camel-test-spring-junit5
          </a>
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <strong>
          JUnit 5
         </strong>
         : Used for testing Camel with Spring / Spring Boot
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          <a class="xref page" href="test-infra.html">
           camel-test-infra
          </a>
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <strong>
          Camel Test Infra
         </strong>
         : Camel Test Infra is a set of modules that leverage modern JUnit 5 features to abstract the provisioning and execution of test infrastructure. Among other things, it provides abstraction of the infrastructure (based on Test Containers - being the de-facto successor of the camel-testcontainers components) as well as JUnit 5 extensions for the Camel Context itself.
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
   <div class="admonitionblock note">
    <div class="table-wrapper">
     <table>
      <tr>
       <td class="icon">
        <i class="fa icon-note" title="Note">
        </i>
       </td>
       <td class="content">
        If you are using Camel Quarkus, then you can find information in its documentation how to do testing with Quarkus and Camel.
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="paragraph">
    <p>
     In all approaches, the test classes look pretty much the same in that they all reuse the
     <a class="xref page" href="bean-integration.html">
      Camel binding and injection annotations
     </a>
     .
    </p>
   </div>
   <div class="admonitionblock tip">
    <div class="table-wrapper">
     <table>
      <tr>
       <td class="icon">
        <i class="fa icon-tip" title="Tip">
        </i>
       </td>
       <td class="content">
        For more details on the different testing modules, then see their respective documentation from the links in the table above.
       </td>
      </tr>
     </table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_testing_functionality">
   <a class="anchor" href="#_testing_functionality">
   </a>
   Testing functionality
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Camel provides a set of features that are common to use when writing unit or integration tests with Camel.
    </p>
   </div>
   <div class="sect2">
    <h3 id="_testing_endpoints">
     <a class="anchor" href="#_testing_endpoints">
     </a>
     Testing endpoints
    </h3>
    <div class="paragraph">
     <p>
      Camel provides a number of
      <a class="xref page" href="endpoint.html">
       endpoints
      </a>
      which can make testing easier.
     </p>
    </div>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Name
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="../components/4.10.x/mock-component.html">
           Mock
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          For testing routes and mediation rules using mocks and allowing assertions to be added to an endpoint.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="../components/4.10.x/dataset-component.html">
           DataSet
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          For load &amp; soak testing, this endpoint provides a way to create huge numbers of messages for sending to components and asserting that they are consumed correctly.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="../components/4.10.x/dataset-test-component.html">
           DataSet Test
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Used to automatically load a set of expected messages from another endpoint which is then compared to the messages that arrive at this endpoint.
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="paragraph">
     <p>
      The main endpoint is the
      <a class="xref page" href="../components/4.10.x/mock-component.html">
       Mock
      </a>
      endpoint, which allows expectations to be added to different endpoints; you can then run your tests and assert that your expectations are met at the end.
     </p>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_stubbing_out_physical_transport_technologies">
     <a class="anchor" href="#_stubbing_out_physical_transport_technologies">
     </a>
     Stubbing out physical transport technologies
    </h3>
    <div class="paragraph">
     <p>
      If you wish to test out a route but want to avoid actually using real physical transport, then the following endpoints can be useful:
     </p>
    </div>
    <div class="admonitionblock note">
     <div class="table-wrapper">
      <table>
       <tr>
        <td class="icon">
         <i class="fa icon-note" title="Note">
         </i>
        </td>
        <td class="content">
         For example, to unit test a transformation route rather than performing a full integration test
        </td>
       </tr>
      </table>
     </div>
    </div>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Name
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="../components/4.10.x/direct-component.html">
           Direct
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Direct invocation of the consumer from the producer so that single threaded (non-SEDA) in VM invocation is performed which can be useful to mock out physical transports
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="../components/4.10.x/seda-component.html">
           SEDA
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Deliver messages asynchronously to consumers via a
          <code>
           BlockingQueue
          </code>
          which is good for testing asynchronous transports
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="../components/4.10.x/stub-component.html">
           Stub
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Works like
          <a class="xref page" href="../components/4.10.x/stub-component.html">
           SEDA
          </a>
          but does not validate the endpoint URI, which makes stubbing straightforward.
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_testing_existing_routes">
     <a class="anchor" href="#_testing_existing_routes">
     </a>
     Testing existing routes
    </h3>
    <div class="paragraph">
     <p>
      Camel provides some features to aid during testing of existing routes where you cannot or will not use
      <a class="xref page" href="../components/4.10.x/mock-component.html">
       Mock
      </a>
      etc. For example, you may have a production ready route which you want to test with some third party API that sends messages into this route.
     </p>
    </div>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Name
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="notify-builder.html">
           NotifyBuilder
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Allows you to be notified when a certain condition has occurred. For example, when the route has completed five messages. You can build complex expressions to match your criteria when to be notified.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a class="xref page" href="advice-with.html">
           AdviceWith
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Allows you to
          <em>
           advice
          </em>
          (enhance) an existing route using a
          <a class="xref page" href="route-builder.html">
           RouteBuilder
          </a>
          style. For example, you can send (or send and skip) a message to a
          <a class="xref page" href="../components/4.10.x/mock-component.html">
           Mock
          </a>
          endpoint for validating the message send by Camel is as expected.
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_third_party_testing_libraries">
     <a class="anchor" href="#_third_party_testing_libraries">
     </a>
     Third Party Testing libraries
    </h3>
    <div class="paragraph">
     <p>
      There are a number of third party testing libraries that Camel users have found useful.
     </p>
    </div>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Name
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a href="https://citrusframework.org/">
           Citrus Integration Framework
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Framework for automated integration tests supporting a wide range of message protocols and data formats
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a href="https://citrusframework.org/yaks/">
           Citrus Yaks
          </a>
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          YAKS is a framework to enable Cloud Native BDD testing on Kubernetes
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </div>
 </div>
</article>
