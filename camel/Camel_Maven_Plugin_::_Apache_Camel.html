<article class="doc">
 <h1 class="page">
  Camel Maven Plugin
 </h1>
 <div id="preamble">
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The Camel Maven Plugin supports the following goals
    </p>
   </div>
   <div class="ulist">
    <ul>
     <li>
      <p>
       camel:run - To run your Camel application
      </p>
     </li>
     <li>
      <p>
       camel:dev - To run your Camel application in developer mode
      </p>
     </li>
     <li>
      <p>
       camel:debug - To run your Camel application in debug mode
      </p>
     </li>
     <li>
      <p>
       camel:prepare-fatjar - To prepare your Camel application for being packaged as a fat-jar (such as by maven-assembly-plugin)
      </p>
     </li>
    </ul>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_camelrun">
   <a class="anchor" href="#_camelrun">
   </a>
   camel:run
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The
     <code>
      camel:run
     </code>
     goal of the Camel Maven Plugin is used to run your Camel Spring configurations in a forked JVM from Maven. A good example application to get you started is the Spring Example.
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre>cd examples/camel-example-spring
mvn camel:run</pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     This makes it very easy to spin up and test your routing rules without having to write a main(…​) method; it also lets you create multiple jars to host different sets of routing rules and easily test them independently.
    </p>
   </div>
   <div class="paragraph">
    <p>
     How this works is that the plugin will compile the source code in the maven project, then boot up a Spring ApplicationContext using the XML configuration files on the classpath at
     <code>
      META-INF/spring/*.xml
     </code>
    </p>
   </div>
   <div class="paragraph">
    <p>
     If you want to boot up your Camel routes a little faster, you could try the
     <code>
      camel:embedded
     </code>
     instead.
    </p>
   </div>
   <div class="sect2">
    <h3 id="_options">
     <a class="anchor" href="#_options">
     </a>
     Options
    </h3>
    <div class="paragraph">
     <p>
      The maven plugin
      <strong>
       run
      </strong>
      goal supports the following options which can be configured from the command line (use
      <code>
       -D
      </code>
      syntax), or defined in the
      <code>
       pom.xml
      </code>
      file in the
      <code>
       &lt;configuration&gt;
      </code>
      tag.
     </p>
    </div>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Parameter
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Default Value
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Description
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          duration
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Sets the time duration (seconds) that the application will run for before terminating. A value ⇐ 0 will run forever.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          durationIdle
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Sets the idle time duration (seconds) duration that the application can be idle before terminating. A value ⇐ 0 will run forever.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          durationMaxMessages
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Sets the duration of maximum number of messages that the application will process before terminating.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          logClasspath
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Whether to log the classpath when starting
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          loggingLevel
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          OFF
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Whether to use built-in console logging (uses log4j), which does not require to add any logging dependency to your project. However, the logging is fixed to log to the console, with a color style that is similar to Spring Boot. You can change the root logging level to: FATAL, ERROR, WARN, INFO, DEBUG, TRACE, OFF
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          profile
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          To run with a specific Camel Main profile (dev,test,prod)
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_logging_the_classpath">
     <a class="anchor" href="#_logging_the_classpath">
     </a>
     Logging the classpath
    </h3>
    <div class="paragraph">
     <p>
      You can configure whether the classpath should be logged when
      <code>
       camel:run
      </code>
      executes. You can enable this in the configuration using:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;logClasspath&gt;true&lt;/logClasspath&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
     </div>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_built_in_logging">
     <a class="anchor" href="#_using_built_in_logging">
     </a>
     Using built-in logging
    </h3>
    <div class="paragraph">
     <p>
      If you want quickly to have logging to console, you can use the built-in logging by setting the logging level as shown:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;loggingLevel&gt;INFO&lt;/loggingLevel&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
     </div>
    </div>
    <div class="paragraph">
     <p>
      This runs the application with console logging, in color that is similar to Spring Boot logging. This is default turned off, to use the configured logging system in the project.
     </p>
    </div>
    <div class="paragraph">
     <p>
      The idea with the built-in logging is that you sometimes want to avoid messing with setting up logging, and just want a quick and easy log to console that looks good.
     </p>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_cameldev">
   <a class="anchor" href="#_cameldev">
   </a>
   camel:dev
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The
     <code>
      camel:dev
     </code>
     is an extension to
     <code>
      camel:run
     </code>
     to run the Camel application in developer mode. In this mode, among others, Camel will use hot-reloading of DSL routes (xml, yaml and java) that are located from the
     <code>
      src/main/resources
     </code>
     directory.
    </p>
   </div>
   <div class="sect2">
    <h3 id="_options_2">
     <a class="anchor" href="#_options_2">
     </a>
     Options
    </h3>
    <div class="paragraph">
     <p>
      The maven plugin
      <strong>
       dev
      </strong>
      goal supports the following options which can be configured from the command line (use
      <code>
       -D
      </code>
      syntax), or defined in the
      <code>
       pom.xml
      </code>
      file in the
      <code>
       &lt;configuration&gt;
      </code>
      tag.
     </p>
    </div>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Parameter
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Default Value
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Description
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          routesDirectory
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          src/main/resources
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          To watch the directory for file changes which triggers a live reload of the Camel routes on-the-fly.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          duration
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Sets the time duration (seconds) that the application will run for before terminating. A value ⇐ 0 will run forever.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          durationIdle
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Sets the idle time duration (seconds) duration that the application can be idle before terminating. A value ⇐ 0 will run forever.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          durationMaxMessages
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Sets the duration of maximum number of messages that the application will process before terminating.
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          logClasspath
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Whether to log the classpath when starting
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          loggingLevel
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          OFF
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Whether to use built-in console logging (uses log4j), which does not require to add any logging dependency to your project. However, the logging is fixed to log to the console, with a color style that is similar to Spring Boot. You can change the root logging level to: FATAL, ERROR, WARN, INFO, DEBUG, TRACE, OFF
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          profile
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          dev
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          To run with a specific Camel Main profile (dev,test,prod)
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_cameldebug">
   <a class="anchor" href="#_cameldebug">
   </a>
   camel:debug
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The
     <code>
      camel:debug
     </code>
     is an extension to
     <code>
      camel:dev
     </code>
     to run the Camel application in debug mode which allows to debug the Camel routes thanks to the Camel textual route debugger.
    </p>
   </div>
   <div class="sect2">
    <h3 id="_options_3">
     <a class="anchor" href="#_options_3">
     </a>
     Options
    </h3>
    <div class="paragraph">
     <p>
      The maven plugin
      <strong>
       debug
      </strong>
      goal supports the following options which can be configured from the command line (use
      <code>
       -D
      </code>
      syntax), or defined in the
      <code>
       pom.xml
      </code>
      file in the
      <code>
       &lt;configuration&gt;
      </code>
      tag.
     </p>
    </div>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Parameter
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Default Value
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Description
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          suspend
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          true
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Indicates whether the message processing done by Camel should be suspended as long as a debugger is not attached.
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_camelprepare_fatjar">
   <a class="anchor" href="#_camelprepare_fatjar">
   </a>
   camel:prepare-fatjar
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The
     <code>
      camel:prepare-fatjar
     </code>
     goal of the Camel Maven Plugin is used to prepare your Camel application for being packaged as a
     <em>
      fat jar
     </em>
     . The goal scans the Maven dependencies to discover Camel JARs and extract if they have type converters, which gets merged together into a single
     <em>
      uber
     </em>
     file stored in
     <code>
      target/classes/META-INF/services/org/apache/camel/UberTypeConverterLoader
     </code>
     .
    </p>
   </div>
   <div class="paragraph">
    <p>
     This
     <em>
      uber
     </em>
     loader file contains all the combined type converters the Camel application uses at runtime. They are merged together into this single file.
    </p>
   </div>
   <div class="paragraph">
    <p>
     This is needed as otherwise the
     <em>
      fat jar
     </em>
     maven plugins (such as maven-assembly-plugin, or maven-shade-plugin) causes the
     <code>
      TypeConverterLoader
     </code>
     files to be overwritten in the assembled JAR which causes not all type converters to be loaded by Camel.
    </p>
   </div>
   <div class="paragraph">
    <p>
     The
     <code>
      UberTypeConverterLoader
     </code>
     ensures they all type converters gets loaded as this file contains all the known type converter files.
    </p>
   </div>
   <div class="paragraph">
    <p>
     To use this goal, you can add the following to your Camel application
     <code>
      pom.xml
     </code>
     file:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
        &lt;artifactId&gt;camel-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${camel.version}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;prepare-fatjar&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     For example to use this with the
     <code>
      maven-assembly-plugin
     </code>
     you can do as below. Remember to specify the class name of
     <strong>
      your
     </strong>
     main class where it says
     <code>
      com.foo.NameOfMainClass
     </code>
     :
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
        &lt;artifactId&gt;camel-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${camel.version}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;prepare-fatjar&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
          &lt;archive&gt;
            &lt;manifest&gt;
              &lt;mainClass&gt;com.foo.NameOfMainClass&lt;/mainClass&gt;
            &lt;/manifest&gt;
          &lt;/archive&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre>
    </div>
   </div>
  </div>
 </div>
</article>
