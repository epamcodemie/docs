<article class="doc">
 <h1 class="page">
  JPA
 </h1>
 <div id="preamble">
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     <strong>
      Since Camel 1.0
     </strong>
    </p>
   </div>
   <div class="paragraph">
    <p>
     <strong>
      Both producer and consumer are supported
     </strong>
    </p>
   </div>
   <div class="paragraph">
    <p>
     The JPA component enables you to store and retrieve Java objects from persistent storage using EJB 3’s Java Persistence Architecture (JPA). JPA is a standard interface layer that wraps Object/Relational Mapping (ORM) products such as OpenJPA, Hibernate, TopLink, and so on.
    </p>
   </div>
   <div class="paragraph">
    <p>
     Maven users will need to add the following dependency to their
     <code>
      pom.xml
     </code>
     for this component:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-jpa&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</code></pre>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_uri_format">
   <a class="anchor" href="#_uri_format">
   </a>
   URI format
  </h2>
  <div class="sectionbody">
   <div class="listingblock">
    <div class="content">
     <pre>jpa:entityClassName[?options]</pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     For sending to the endpoint, the
     <em>
      entityClassName
     </em>
     is optional. If specified, it helps the
     <a href="http://camel.apache.org/type-converter.html">
      Type Converter
     </a>
     to ensure the body is of the correct type.
    </p>
   </div>
   <div class="paragraph">
    <p>
     For consuming, the
     <em>
      entityClassName
     </em>
     is mandatory.
    </p>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_configuring_options">
   <a class="anchor" href="#_configuring_options">
   </a>
   Configuring Options
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Camel components are configured on two separate levels:
    </p>
   </div>
   <div class="ulist">
    <ul>
     <li>
      <p>
       component level
      </p>
     </li>
     <li>
      <p>
       endpoint level
      </p>
     </li>
    </ul>
   </div>
   <div class="sect2">
    <h3 id="_configuring_component_options">
     <a class="anchor" href="#_configuring_component_options">
     </a>
     Configuring Component Options
    </h3>
    <div class="paragraph">
     <p>
      At the component level, you set general and shared configurations that are, then, inherited by the endpoints. It is the highest configuration level.
     </p>
    </div>
    <div class="paragraph">
     <p>
      For example, a component may have security settings, credentials for authentication, urls for network connection and so forth.
     </p>
    </div>
    <div class="paragraph">
     <p>
      Some components only have a few options, and others may have many. Because components typically have pre-configured defaults that are commonly used, then you may often only need to configure a few options on a component; or none at all.
     </p>
    </div>
    <div class="paragraph">
     <p>
      You can configure components using:
     </p>
    </div>
    <div class="ulist">
     <ul>
      <li>
       <p>
        the
        <a class="xref page" href="../../manual/component-dsl.html">
         Component DSL
        </a>
        .
       </p>
      </li>
      <li>
       <p>
        in a configuration file (
        <code>
         application.properties
        </code>
        ,
        <code>
         *.yaml
        </code>
        files, etc).
       </p>
      </li>
      <li>
       <p>
        directly in the Java code.
       </p>
      </li>
     </ul>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_configuring_endpoint_options">
     <a class="anchor" href="#_configuring_endpoint_options">
     </a>
     Configuring Endpoint Options
    </h3>
    <div class="paragraph">
     <p>
      You usually spend more time setting up endpoints because they have many options. These options help you customize what you want the endpoint to do. The options are also categorized into whether the endpoint is used as a consumer (
      <em>
       from
      </em>
      ), as a producer (
      <em>
       to
      </em>
      ), or both.
     </p>
    </div>
    <div class="paragraph">
     <p>
      Configuring endpoints is most often done directly in the endpoint URI as
      <em>
       path
      </em>
      and
      <em>
       query
      </em>
      parameters. You can also use the
      <a class="xref page" href="../../manual/Endpoint-dsl.html">
       Endpoint DSL
      </a>
      and
      <a class="xref page" href="../../manual/dataformat-dsl.html">
       DataFormat DSL
      </a>
      as a
      <em>
       type safe
      </em>
      way of configuring endpoints and data formats in Java.
     </p>
    </div>
    <div class="paragraph">
     <p>
      A good practice when configuring options is to use
      <a class="xref page" href="../../manual/using-propertyplaceholder.html">
       Property Placeholders
      </a>
      .
     </p>
    </div>
    <div class="paragraph">
     <p>
      Property placeholders provide a few benefits:
     </p>
    </div>
    <div class="ulist">
     <ul>
      <li>
       <p>
        They help prevent using hardcoded urls, port numbers, sensitive information, and other settings.
       </p>
      </li>
      <li>
       <p>
        They allow externalizing the configuration from the code.
       </p>
      </li>
      <li>
       <p>
        They help the code to become more flexible and reusable.
       </p>
      </li>
     </ul>
    </div>
    <div class="paragraph">
     <p>
      The following two sections list all the options, firstly for the component followed by the endpoint.
     </p>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_component_options">
   <a class="anchor" href="#_component_options">
   </a>
   Component Options
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The JPA component supports 10 options, which are listed below.
    </p>
   </div>
   <div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
     <colgroup>
      <col/>
      <col/>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th class="tableblock halign-left valign-top">
        Name
       </th>
       <th class="tableblock halign-left valign-top">
        Description
       </th>
       <th class="tableblock halign-center valign-top">
        Default
       </th>
       <th class="tableblock halign-left valign-top">
        Type
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_aliases">
         </a>
         <a class="anchor" href="#_component_option_aliases">
         </a>
         <strong>
          aliases
         </strong>
         (common)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Maps an alias to a JPA entity class. The alias can then be used in the endpoint URI (instead of the fully qualified class name).
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Map
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_entityManagerFactory">
         </a>
         <a class="anchor" href="#_component_option_entityManagerFactory">
         </a>
         <strong>
          entityManagerFactory
         </strong>
         (common)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           <strong>
            Autowired
           </strong>
           To use the EntityManagerFactory. This is strongly recommended to configure.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         EntityManagerFactory
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_joinTransaction">
         </a>
         <a class="anchor" href="#_component_option_joinTransaction">
         </a>
         <strong>
          joinTransaction
         </strong>
         (common)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           The camel-jpa component will join transaction by default. You can use this option to turn this off, for example if you use LOCAL_RESOURCE and join transaction doesn’t work with your JPA provider. This option can also be set globally on the JpaComponent, instead of having to set it on all endpoints.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_sharedEntityManager">
         </a>
         <a class="anchor" href="#_component_option_sharedEntityManager">
         </a>
         <strong>
          sharedEntityManager
         </strong>
         (common)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Whether to use Spring’s SharedEntityManager for the consumer/producer. Note in most cases joinTransaction should be set to false as this is not an EXTENDED EntityManager.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         false
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_transactionStrategy">
         </a>
         <a class="anchor" href="#_component_option_transactionStrategy">
         </a>
         <strong>
          transactionStrategy
         </strong>
         (common)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           To use the TransactionStrategy for running the operations in a transaction.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         TransactionStrategy
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_bridgeErrorHandler">
         </a>
         <a class="anchor" href="#_component_option_bridgeErrorHandler">
         </a>
         <strong>
          bridgeErrorHandler
         </strong>
         (consumer)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions (if possible) occurred while the Camel consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. Important: This is only possible if the 3rd party component allows Camel to be alerted if an exception was thrown. Some components handle this internally only, and therefore bridgeErrorHandler is not possible. In other situations we may improve the Camel component to hook into the 3rd party component and make this possible for future releases. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         false
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_lazyStartProducer">
         </a>
         <a class="anchor" href="#_component_option_lazyStartProducer">
         </a>
         <strong>
          lazyStartProducer
         </strong>
         (producer)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Whether the producer should be started lazy (on the first message). By starting lazy you can use this to allow CamelContext and routes to startup in situations where a producer may otherwise fail during starting and cause the route to fail being started. By deferring this startup to be lazy then the startup failure can be handled during routing messages via Camel’s routing error handlers. Beware that when the first message is processed then creating and starting the producer may take a little time and prolong the total processing time of the processing.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         false
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_autowiredEnabled">
         </a>
         <a class="anchor" href="#_component_option_autowiredEnabled">
         </a>
         <strong>
          autowiredEnabled
         </strong>
         (advanced)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Whether autowiring is enabled. This is used for automatic autowiring options (the option must be marked as autowired) by looking up in the registry to find if there is a single instance of matching type, which then gets configured on the component. This can be used for automatic configuring JDBC data sources, JMS connection factories, AWS Clients, etc.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_healthCheckConsumerEnabled">
         </a>
         <a class="anchor" href="#_component_option_healthCheckConsumerEnabled">
         </a>
         <strong>
          healthCheckConsumerEnabled
         </strong>
         (health)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Used for enabling or disabling all consumer based health checks from this component.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_component_option_healthCheckProducerEnabled">
         </a>
         <a class="anchor" href="#_component_option_healthCheckProducerEnabled">
         </a>
         <strong>
          healthCheckProducerEnabled
         </strong>
         (health)
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Used for enabling or disabling all producer based health checks from this component. Notice: Camel has by default disabled all producer based health-checks. You can turn on producer checks globally by setting camel.health.producersEnabled=true.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         boolean
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_endpoint_options">
   <a class="anchor" href="#_endpoint_options">
   </a>
   Endpoint Options
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The JPA endpoint is configured using URI syntax:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre>jpa:entityType</pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     With the following
     <em>
      path
     </em>
     and
     <em>
      query
     </em>
     parameters:
    </p>
   </div>
   <div class="sect2">
    <h3 id="_path_parameters_1_parameters">
     <a class="anchor" href="#_path_parameters_1_parameters">
     </a>
     Path Parameters (1 parameters)
    </h3>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Name
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
        <th class="tableblock halign-center valign-top">
         Default
        </th>
        <th class="tableblock halign-left valign-top">
         Type
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_path_option_entityType">
          </a>
          <a class="anchor" href="#_endpoint_path_option_entityType">
          </a>
          <strong>
           entityType
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            <strong>
             Required
            </strong>
            Entity class name.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Class
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_query_parameters">
     <a class="anchor" href="#_query_parameters">
     </a>
     Query Parameters (48 parameters)
    </h3>
    <div class="table-wrapper">
     <table class="tableblock frame-all grid-all stretch">
      <colgroup>
       <col/>
       <col/>
       <col/>
       <col/>
      </colgroup>
      <thead>
       <tr>
        <th class="tableblock halign-left valign-top">
         Name
        </th>
        <th class="tableblock halign-left valign-top">
         Description
        </th>
        <th class="tableblock halign-center valign-top">
         Default
        </th>
        <th class="tableblock halign-left valign-top">
         Type
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_entityManagerFactory">
          </a>
          <a class="anchor" href="#_endpoint_query_option_entityManagerFactory">
          </a>
          <strong>
           entityManagerFactory
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            The EntityManagerFactory to use.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          EntityManagerFactory
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_joinTransaction">
          </a>
          <a class="anchor" href="#_endpoint_query_option_joinTransaction">
          </a>
          <strong>
           joinTransaction
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            The camel-jpa component will join transaction by default. You can use this option to turn this off, for example, if you use LOCAL_RESOURCE and join transaction doesn’t work with your JPA provider. This option can also be set globally on the JpaComponent, instead of having to set it on all endpoints.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          true
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_maximumResults">
          </a>
          <a class="anchor" href="#_endpoint_query_option_maximumResults">
          </a>
          <strong>
           maximumResults
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Set the maximum number of results to retrieve on the Query.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          int
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_namedQuery">
          </a>
          <a class="anchor" href="#_endpoint_query_option_namedQuery">
          </a>
          <strong>
           namedQuery
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To use a named query.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_nativeQuery">
          </a>
          <a class="anchor" href="#_endpoint_query_option_nativeQuery">
          </a>
          <strong>
           nativeQuery
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To use a custom native query. You may want to use the option resultClass also when using native queries.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_persistenceUnit">
          </a>
          <a class="anchor" href="#_endpoint_query_option_persistenceUnit">
          </a>
          <strong>
           persistenceUnit
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            <strong>
             Required
            </strong>
            The JPA persistence unit used by default.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          camel
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_query">
          </a>
          <a class="anchor" href="#_endpoint_query_option_query">
          </a>
          <strong>
           query
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To use a custom query.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_resultClass">
          </a>
          <a class="anchor" href="#_endpoint_query_option_resultClass">
          </a>
          <strong>
           resultClass
          </strong>
          (common)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Defines the type of the returned payload (we will call entityManager.createNativeQuery(nativeQuery, resultClass) instead of entityManager.createNativeQuery(nativeQuery)). Without this option, we will return an object array. Only has an effect when using in conjunction with a native query when consuming data.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Class
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_consumeDelete">
          </a>
          <a class="anchor" href="#_endpoint_query_option_consumeDelete">
          </a>
          <strong>
           consumeDelete
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            If true, the entity is deleted after it is consumed; if false, the entity is not deleted.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          true
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_consumeLockEntity">
          </a>
          <a class="anchor" href="#_endpoint_query_option_consumeLockEntity">
          </a>
          <strong>
           consumeLockEntity
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Specifies whether to set an exclusive lock on each entity bean while processing the results from polling.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          true
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_deleteHandler">
          </a>
          <a class="anchor" href="#_endpoint_query_option_deleteHandler">
          </a>
          <strong>
           deleteHandler
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To use a custom DeleteHandler to delete the row after the consumer is done processing the exchange.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          DeleteHandler
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_lockModeType">
          </a>
          <a class="anchor" href="#_endpoint_query_option_lockModeType">
          </a>
          <strong>
           lockModeType
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To configure the lock mode on the consumer.
           </p>
          </div>
          <div class="paragraph">
           <p>
            Enum values:
           </p>
          </div>
          <div class="ulist">
           <ul>
            <li>
             <p>
              READ
             </p>
            </li>
            <li>
             <p>
              WRITE
             </p>
            </li>
            <li>
             <p>
              OPTIMISTIC
             </p>
            </li>
            <li>
             <p>
              OPTIMISTIC_FORCE_INCREMENT
             </p>
            </li>
            <li>
             <p>
              PESSIMISTIC_READ
             </p>
            </li>
            <li>
             <p>
              PESSIMISTIC_WRITE
             </p>
            </li>
            <li>
             <p>
              PESSIMISTIC_FORCE_INCREMENT
             </p>
            </li>
            <li>
             <p>
              NONE
             </p>
            </li>
           </ul>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          PESSIMISTIC_WRITE
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          LockModeType
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_maxMessagesPerPoll">
          </a>
          <a class="anchor" href="#_endpoint_query_option_maxMessagesPerPoll">
          </a>
          <strong>
           maxMessagesPerPoll
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            An integer value to define the maximum number of messages to gather per poll. By default, no maximum is set. It can be used to avoid polling many thousands of messages when starting up the server. Set a value of 0 or negative to disable.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          int
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_preDeleteHandler">
          </a>
          <a class="anchor" href="#_endpoint_query_option_preDeleteHandler">
          </a>
          <strong>
           preDeleteHandler
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To use a custom Pre-DeleteHandler to delete the row after the consumer has read the entity.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          DeleteHandler
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_sendEmptyMessageWhenIdle">
          </a>
          <a class="anchor" href="#_endpoint_query_option_sendEmptyMessageWhenIdle">
          </a>
          <strong>
           sendEmptyMessageWhenIdle
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            If the polling consumer did not poll any files, you can enable this option to send an empty message (no body) instead.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_skipLockedEntity">
          </a>
          <a class="anchor" href="#_endpoint_query_option_skipLockedEntity">
          </a>
          <strong>
           skipLockedEntity
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To configure whether to use NOWAIT on lock and silently skip the entity.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_transacted">
          </a>
          <a class="anchor" href="#_endpoint_query_option_transacted">
          </a>
          <strong>
           transacted
          </strong>
          (consumer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Whether to run the consumer in transacted mode, by which all messages will either commit or rollback, when the entire batch has been processed. The default behavior (false) is to commit all the previously successfully processed messages, and only roll back the last failed message.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_bridgeErrorHandler">
          </a>
          <a class="anchor" href="#_endpoint_query_option_bridgeErrorHandler">
          </a>
          <strong>
           bridgeErrorHandler
          </strong>
          (consumer (advanced))
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions (if possible) occurred while the Camel consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. Important: This is only possible if the 3rd party component allows Camel to be alerted if an exception was thrown. Some components handle this internally only, and therefore bridgeErrorHandler is not possible. In other situations we may improve the Camel component to hook into the 3rd party component and make this possible for future releases. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_exceptionHandler">
          </a>
          <a class="anchor" href="#_endpoint_query_option_exceptionHandler">
          </a>
          <strong>
           exceptionHandler
          </strong>
          (consumer (advanced))
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this option is not in use. By default the consumer will deal with exceptions, that will be logged at WARN or ERROR level and ignored.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          ExceptionHandler
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_exchangePattern">
          </a>
          <a class="anchor" href="#_endpoint_query_option_exchangePattern">
          </a>
          <strong>
           exchangePattern
          </strong>
          (consumer (advanced))
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Sets the exchange pattern when the consumer creates an exchange.
           </p>
          </div>
          <div class="paragraph">
           <p>
            Enum values:
           </p>
          </div>
          <div class="ulist">
           <ul>
            <li>
             <p>
              InOnly
             </p>
            </li>
            <li>
             <p>
              InOut
             </p>
            </li>
           </ul>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          ExchangePattern
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_parameters">
          </a>
          <a class="anchor" href="#_endpoint_query_option_parameters">
          </a>
          <strong>
           parameters
          </strong>
          (consumer (advanced))
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            This key/value mapping is used for building the query parameters. It is expected to be of the generic type java.util.Map where the keys are the named parameters of a given JPA query and the values are their corresponding effective values you want to select for. When it’s used for producer, Simple expression can be used as a parameter value. It allows you to retrieve parameter values from the message body, header and etc.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Map
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_pollStrategy">
          </a>
          <a class="anchor" href="#_endpoint_query_option_pollStrategy">
          </a>
          <strong>
           pollStrategy
          </strong>
          (consumer (advanced))
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            A pluggable org.apache.camel.PollingConsumerPollingStrategy allowing you to provide your custom implementation to control error handling usually occurred during the poll operation before an Exchange have been created and being routed in Camel.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          PollingConsumerPollStrategy
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_findEntity">
          </a>
          <a class="anchor" href="#_endpoint_query_option_findEntity">
          </a>
          <strong>
           findEntity
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            If enabled, then the producer will find a single entity by using the message body as a key and entityType as the class type. This can be used instead of a query to find a single entity.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_firstResult">
          </a>
          <a class="anchor" href="#_endpoint_query_option_firstResult">
          </a>
          <strong>
           firstResult
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Set the position of the first result to retrieve.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          -1
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          int
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_flushOnSend">
          </a>
          <a class="anchor" href="#_endpoint_query_option_flushOnSend">
          </a>
          <strong>
           flushOnSend
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Flushes the EntityManager after the entity bean has been persisted.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          true
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_outputTarget">
          </a>
          <a class="anchor" href="#_endpoint_query_option_outputTarget">
          </a>
          <strong>
           outputTarget
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To put the query (or find) result in a header or property instead of the body. If the value starts with the prefix property:, put the result into the so named property, otherwise into the header.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          String
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_remove">
          </a>
          <a class="anchor" href="#_endpoint_query_option_remove">
          </a>
          <strong>
           remove
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Indicates to use entityManager.remove(entity).
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_singleResult">
          </a>
          <a class="anchor" href="#_endpoint_query_option_singleResult">
          </a>
          <strong>
           singleResult
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            If enabled, a query or a find which would return no results or more than one result, will throw an exception instead.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_useExecuteUpdate">
          </a>
          <a class="anchor" href="#_endpoint_query_option_useExecuteUpdate">
          </a>
          <strong>
           useExecuteUpdate
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To configure whether to use executeUpdate() when producer executes a query. When you use INSERT, UPDATE or a DELETE statement as a named query, you need to specify this option to 'true'.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_usePersist">
          </a>
          <a class="anchor" href="#_endpoint_query_option_usePersist">
          </a>
          <strong>
           usePersist
          </strong>
          (producer)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Indicates to use entityManager.persist(entity) instead of entityManager.merge(entity). Note: entityManager.persist(entity) doesn’t work for detached entities (where the EntityManager has to execute an UPDATE instead of an INSERT query)!.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_lazyStartProducer">
          </a>
          <a class="anchor" href="#_endpoint_query_option_lazyStartProducer">
          </a>
          <strong>
           lazyStartProducer
          </strong>
          (producer (advanced))
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Whether the producer should be started lazy (on the first message). By starting lazy you can use this to allow CamelContext and routes to startup in situations where a producer may otherwise fail during starting and cause the route to fail being started. By deferring this startup to be lazy then the startup failure can be handled during routing messages via Camel’s routing error handlers. Beware that when the first message is processed then creating and starting the producer may take a little time and prolong the total processing time of the processing.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_usePassedInEntityManager">
          </a>
          <a class="anchor" href="#_endpoint_query_option_usePassedInEntityManager">
          </a>
          <strong>
           usePassedInEntityManager
          </strong>
          (producer (advanced))
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            If set to true, then Camel will use the EntityManager from the header JpaConstants.ENTITY_MANAGER instead of the configured entity manager on the component/endpoint. This allows end users to control which entity manager will be in use.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_entityManagerProperties">
          </a>
          <a class="anchor" href="#_endpoint_query_option_entityManagerProperties">
          </a>
          <strong>
           entityManagerProperties
          </strong>
          (advanced)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Additional properties for the entity manager to use.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Map
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_sharedEntityManager">
          </a>
          <a class="anchor" href="#_endpoint_query_option_sharedEntityManager">
          </a>
          <strong>
           sharedEntityManager
          </strong>
          (advanced)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Whether to use Spring’s SharedEntityManager for the consumer/producer. Note in most cases, joinTransaction should be set to false as this is not an EXTENDED EntityManager.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_backoffErrorThreshold">
          </a>
          <a class="anchor" href="#_endpoint_query_option_backoffErrorThreshold">
          </a>
          <strong>
           backoffErrorThreshold
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            The number of subsequent error polls (failed due some error) that should happen before the backoffMultipler should kick-in.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          int
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_backoffIdleThreshold">
          </a>
          <a class="anchor" href="#_endpoint_query_option_backoffIdleThreshold">
          </a>
          <strong>
           backoffIdleThreshold
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            The number of subsequent idle polls that should happen before the backoffMultipler should kick-in.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          int
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_backoffMultiplier">
          </a>
          <a class="anchor" href="#_endpoint_query_option_backoffMultiplier">
          </a>
          <strong>
           backoffMultiplier
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To let the scheduled polling consumer backoff if there has been a number of subsequent idles/errors in a row. The multiplier is then the number of polls that will be skipped before the next actual attempt is happening again. When this option is in use then backoffIdleThreshold and/or backoffErrorThreshold must also be configured.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          int
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_delay">
          </a>
          <a class="anchor" href="#_endpoint_query_option_delay">
          </a>
          <strong>
           delay
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Milliseconds before the next poll.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          500
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          long
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_greedy">
          </a>
          <a class="anchor" href="#_endpoint_query_option_greedy">
          </a>
          <strong>
           greedy
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            If greedy is enabled, then the ScheduledPollConsumer will run immediately again, if the previous run polled 1 or more messages.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          false
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_initialDelay">
          </a>
          <a class="anchor" href="#_endpoint_query_option_initialDelay">
          </a>
          <strong>
           initialDelay
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Milliseconds before the first poll starts.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          1000
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          long
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_repeatCount">
          </a>
          <a class="anchor" href="#_endpoint_query_option_repeatCount">
          </a>
          <strong>
           repeatCount
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Specifies a maximum limit of number of fires. So if you set it to 1, the scheduler will only fire once. If you set it to 5, it will only fire five times. A value of zero or negative means fire forever.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          0
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          long
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_runLoggingLevel">
          </a>
          <a class="anchor" href="#_endpoint_query_option_runLoggingLevel">
          </a>
          <strong>
           runLoggingLevel
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            The consumer logs a start/complete log line when it polls. This option allows you to configure the logging level for that.
           </p>
          </div>
          <div class="paragraph">
           <p>
            Enum values:
           </p>
          </div>
          <div class="ulist">
           <ul>
            <li>
             <p>
              TRACE
             </p>
            </li>
            <li>
             <p>
              DEBUG
             </p>
            </li>
            <li>
             <p>
              INFO
             </p>
            </li>
            <li>
             <p>
              WARN
             </p>
            </li>
            <li>
             <p>
              ERROR
             </p>
            </li>
            <li>
             <p>
              OFF
             </p>
            </li>
           </ul>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          TRACE
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          LoggingLevel
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_scheduledExecutorService">
          </a>
          <a class="anchor" href="#_endpoint_query_option_scheduledExecutorService">
          </a>
          <strong>
           scheduledExecutorService
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Allows for configuring a custom/shared thread pool to use for the consumer. By default each consumer has its own single threaded thread pool.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          ScheduledExecutorService
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_scheduler">
          </a>
          <a class="anchor" href="#_endpoint_query_option_scheduler">
          </a>
          <strong>
           scheduler
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To use a cron scheduler from either camel-spring or camel-quartz component. Use value spring or quartz for built in scheduler.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          none
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Object
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_schedulerProperties">
          </a>
          <a class="anchor" href="#_endpoint_query_option_schedulerProperties">
          </a>
          <strong>
           schedulerProperties
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            To configure additional properties when using a custom scheduler or any of the Quartz, Spring based scheduler.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          Map
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_startScheduler">
          </a>
          <a class="anchor" href="#_endpoint_query_option_startScheduler">
          </a>
          <strong>
           startScheduler
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Whether the scheduler should be auto started.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          true
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_timeUnit">
          </a>
          <a class="anchor" href="#_endpoint_query_option_timeUnit">
          </a>
          <strong>
           timeUnit
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Time unit for initialDelay and delay options.
           </p>
          </div>
          <div class="paragraph">
           <p>
            Enum values:
           </p>
          </div>
          <div class="ulist">
           <ul>
            <li>
             <p>
              NANOSECONDS
             </p>
            </li>
            <li>
             <p>
              MICROSECONDS
             </p>
            </li>
            <li>
             <p>
              MILLISECONDS
             </p>
            </li>
            <li>
             <p>
              SECONDS
             </p>
            </li>
            <li>
             <p>
              MINUTES
             </p>
            </li>
            <li>
             <p>
              HOURS
             </p>
            </li>
            <li>
             <p>
              DAYS
             </p>
            </li>
           </ul>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          MILLISECONDS
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          TimeUnit
         </p>
        </td>
       </tr>
       <tr>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          <a id="_endpoint_query_option_useFixedDelay">
          </a>
          <a class="anchor" href="#_endpoint_query_option_useFixedDelay">
          </a>
          <strong>
           useFixedDelay
          </strong>
          (scheduler)
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <div class="content">
          <div class="paragraph">
           <p>
            Controls if fixed delay or fixed rate is used. See ScheduledExecutorService in JDK for details.
           </p>
          </div>
         </div>
        </td>
        <td class="tableblock halign-center valign-top">
         <p class="tableblock">
          true
         </p>
        </td>
        <td class="tableblock halign-left valign-top">
         <p class="tableblock">
          boolean
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_message_headers">
   <a class="anchor" href="#_message_headers">
   </a>
   Message Headers
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The JPA component supports 4 message header(s), which is/are listed below:
    </p>
   </div>
   <div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
     <colgroup>
      <col/>
      <col/>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th class="tableblock halign-left valign-top">
        Name
       </th>
       <th class="tableblock halign-left valign-top">
        Description
       </th>
       <th class="tableblock halign-center valign-top">
        Default
       </th>
       <th class="tableblock halign-left valign-top">
        Type
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_endpoint_header_CamelEntityManager">
         </a>
         <a class="anchor" href="#_endpoint_header_CamelEntityManager">
         </a>
         <strong>
          CamelEntityManager
         </strong>
         (common)
        </p>
        <p class="tableblock">
         Constant:
         <a href="https://javadoc.io/doc/org.apache.camel/camel-jpa/latest/org/apache/camel/component/jpa/JpaConstants.html#ENTITY_MANAGER">
          <code>
           ENTITY_MANAGER
          </code>
         </a>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           The JPA EntityManager object.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         EntityManager
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_endpoint_header_CamelJpaParameters">
         </a>
         <a class="anchor" href="#_endpoint_header_CamelJpaParameters">
         </a>
         <strong>
          CamelJpaParameters
         </strong>
         (producer)
        </p>
        <p class="tableblock">
         Constant:
         <a href="https://javadoc.io/doc/org.apache.camel/camel-jpa/latest/org/apache/camel/component/jpa/JpaConstants.html#JPA_PARAMETERS_HEADER">
          <code>
           JPA_PARAMETERS_HEADER
          </code>
         </a>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Alternative way for passing query parameters as an Exchange header.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Map
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_endpoint_header_CamelJpaMaximumResults">
         </a>
         <a class="anchor" href="#_endpoint_header_CamelJpaMaximumResults">
         </a>
         <strong>
          CamelJpaMaximumResults
         </strong>
         (producer)
        </p>
        <p class="tableblock">
         Constant:
         <a href="https://javadoc.io/doc/org.apache.camel/camel-jpa/latest/org/apache/camel/component/jpa/JpaConstants.html#JPA_MAXIMUM_RESULTS">
          <code>
           JPA_MAXIMUM_RESULTS
          </code>
         </a>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Defines the maximum number of results to retrieve on the query; takes precedence over the value set on the endpoint, if any.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_endpoint_header_CamelJpaFirstResult">
         </a>
         <a class="anchor" href="#_endpoint_header_CamelJpaFirstResult">
         </a>
         <strong>
          CamelJpaFirstResult
         </strong>
         (producer)
        </p>
        <p class="tableblock">
         Constant:
         <a href="https://javadoc.io/doc/org.apache.camel/camel-jpa/latest/org/apache/camel/component/jpa/JpaConstants.html#JPA_FIRST_RESULT">
          <code>
           JPA_FIRST_RESULT
          </code>
         </a>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <div class="content">
         <div class="paragraph">
          <p>
           Defines the position of the first result to retrieve; takes precedence over the value set on the endpoint, if any.
          </p>
         </div>
        </div>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_usage">
   <a class="anchor" href="#_usage">
   </a>
   Usage
  </h2>
  <div class="sectionbody">
   <div class="sect2">
    <h3 id="_sending_to_the_endpoint">
     <a class="anchor" href="#_sending_to_the_endpoint">
     </a>
     Sending to the endpoint
    </h3>
    <div class="paragraph">
     <p>
      You can store a Java entity bean in a database by sending it to a JPA producer endpoint. The body of the
      <em>
       In
      </em>
      message is assumed to be an entity bean (that is a POJO with an
      <a href="https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/entity">
       @Entity
      </a>
      annotation on it) or a collection or array of entity beans.
     </p>
    </div>
    <div class="paragraph">
     <p>
      If the body is a List of entities, make sure to use
      <strong>
       entityType=java.util.List
      </strong>
      as a configuration passed to the producer endpoint.
     </p>
    </div>
    <div class="paragraph">
     <p>
      If the body does not contain one of the previous listed types, put a Message Translator in front of the endpoint to perform the necessary conversion first.
     </p>
    </div>
    <div class="paragraph">
     <p>
      You can use
      <code>
       query
      </code>
      ,
      <code>
       namedQuery
      </code>
      or
      <code>
       nativeQuery
      </code>
      for the producer as well. Also in the value of the
      <code>
       parameters
      </code>
      , you can use Simple expression which allows you to retrieve parameter values from Message body, header, etc. Those query can be used for retrieving a set of data with using
      <code>
       SELECT
      </code>
      JPQL/SQL statement as well as executing bulk update/delete with using
      <code>
       UPDATE
      </code>
      /
      <code>
       DELETE
      </code>
      JPQL/SQL statement. Please note that you need to specify
      <code>
       useExecuteUpdate
      </code>
      to
      <code>
       true
      </code>
      if you execute
      <code>
       UPDATE
      </code>
      /
      <code>
       DELETE
      </code>
      with
      <code>
       namedQuery
      </code>
      as Camel doesn’t look into the named query unlike
      <code>
       query
      </code>
      and
      <code>
       nativeQuery
      </code>
      .
     </p>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_consuming_from_the_endpoint">
     <a class="anchor" href="#_consuming_from_the_endpoint">
     </a>
     Consuming from the endpoint
    </h3>
    <div class="paragraph">
     <p>
      Consuming messages from a JPA consumer endpoint removes (or updates) entity beans in the database. This allows you to use a database table as a logical queue: consumers take messages from the queue and then delete/update them to logically remove them from the queue.
     </p>
    </div>
    <div class="paragraph">
     <p>
      If you do not wish to delete the entity bean when it has been processed (and when routing is done), you can specify
      <code>
       consumeDelete=false
      </code>
      on the URI. This will result in the entity being processed in each poll.
     </p>
    </div>
    <div class="paragraph">
     <p>
      If you would rather perform some update on the entity to mark it as processed (such as to exclude it from a future query), then you can annotate a method with
      <a href="https://www.javadoc.io/doc/org.apache.camel/camel-jpa/current/org/apache/camel/component/jpa/Consumed.html">
       @Consumed
      </a>
      . It will be invoked on your entity bean when the entity bean has been processed (and when routing is done).
     </p>
    </div>
    <div class="paragraph">
     <p>
      You can use
      <a href="https://www.javadoc.io/doc/org.apache.camel/camel-jpa/current/org/apache/camel/component/jpa/PreConsumed.html">
       @PreConsumed
      </a>
      which will be invoked on your entity bean before it has been processed (before routing).
     </p>
    </div>
    <div class="paragraph">
     <p>
      If you are consuming a lot of rows (100K+) and experience
      <code>
       OutOfMemory
      </code>
      problems, you should set the
      <code>
       maximumResults
      </code>
      to a sensible value.
     </p>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_configuring_entitymanagerfactory">
     <a class="anchor" href="#_configuring_entitymanagerfactory">
     </a>
     Configuring EntityManagerFactory
    </h3>
    <div class="paragraph">
     <p>
      It’s strongly advised to configure the JPA component to use a specific
      <code>
       EntityManagerFactory
      </code>
      instance. If failed to do so each
      <code>
       JpaEndpoint
      </code>
      will auto create their own instance of
      <code>
       EntityManagerFactory
      </code>
      which most often is not what you want.
     </p>
    </div>
    <div class="paragraph">
     <p>
      For example, you can instantiate a JPA component that references the
      <code>
       myEMFactory
      </code>
      entity manager factory, as follows:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="jpa" class="org.apache.camel.component.jpa.JpaComponent"&gt;
   &lt;property name="entityManagerFactory" ref="myEMFactory"/&gt;
&lt;/bean&gt;</code></pre>
     </div>
    </div>
    <div class="paragraph">
     <p>
      The
      <code>
       JpaComponent
      </code>
      looks up automatically the
      <code>
       EntityManagerFactory
      </code>
      from the Registry which means you do not need to configure this on the
      <code>
       JpaComponent
      </code>
      as shown above. You only need to do so if there is ambiguity, in which case Camel will log a WARN.
     </p>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_configuring_transactionstrategy">
     <a class="anchor" href="#_configuring_transactionstrategy">
     </a>
     Configuring TransactionStrategy
    </h3>
    <div class="paragraph">
     <p>
      The
      <code>
       TransactionStrategy
      </code>
      is a vendor neutral abstraction that allows
      <code>
       camel-jpa
      </code>
      to easily plug in and work with Spring
      <code>
       TransactionManager
      </code>
      or Quarkus Transaction API.
     </p>
    </div>
    <div class="paragraph">
     <p>
      The
      <code>
       JpaComponent
      </code>
      looks up automatically the
      <code>
       TransactionStrategy
      </code>
      from the Registry. If Camel cannot find any
      <code>
       TransactionStrategy
      </code>
      instance registered, it will also look up for the
      <code>
       TransactionTemplate
      </code>
      and try to extract
      <code>
       TransactionStrategy
      </code>
      from it.
     </p>
    </div>
    <div class="paragraph">
     <p>
      If none
      <code>
       TransactionTemplate
      </code>
      is available in the registry,
      <code>
       JpaEndpoint
      </code>
      will auto create a default instance (
      <code>
       org.apache.camel.component.jpa.DefaultTransactionStrategy
      </code>
      ) of
      <code>
       TransactionStrategy
      </code>
      which most often is not what you want.
     </p>
    </div>
    <div class="paragraph">
     <p>
      If more than single instance of the
      <code>
       TransactionStrategy
      </code>
      is found, Camel will log a WARN. In such cases you might want to instantiate and explicitly configure a JPA component that references the
      <code>
       myTransactionManager
      </code>
      transaction manager, as follows:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="jpa" class="org.apache.camel.component.jpa.JpaComponent"&gt;
   &lt;property name="entityManagerFactory" ref="myEMFactory"/&gt;
   &lt;property name="transactionStrategy" ref="myTransactionStrategy"/&gt;
&lt;/bean&gt;</code></pre>
     </div>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_a_consumer_with_a_named_query">
     <a class="anchor" href="#_using_a_consumer_with_a_named_query">
     </a>
     Using a consumer with a named query
    </h3>
    <div class="paragraph">
     <p>
      For consuming only selected entities, you can use the
      <code>
       namedQuery
      </code>
      URI query option. First, you have to define the named query in the JPA Entity class:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@NamedQuery(name = "step1", query = "select x from MultiSteps x where x.step = 1")
public class MultiSteps {
   ...
}</code></pre>
     </div>
    </div>
    <div class="paragraph">
     <p>
      After that, you can define a consumer uri like this one:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("jpa://org.apache.camel.examples.MultiSteps?namedQuery=step1")
.to("bean:myBusinessLogic");</code></pre>
     </div>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_a_consumer_with_a_query">
     <a class="anchor" href="#_using_a_consumer_with_a_query">
     </a>
     Using a consumer with a query
    </h3>
    <div class="paragraph">
     <p>
      For consuming only selected entities, you can use the
      <code>
       query
      </code>
      URI query option. You only have to define the query option:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("jpa://org.apache.camel.examples.MultiSteps?query=select o from org.apache.camel.examples.MultiSteps o where o.step = 1")
.to("bean:myBusinessLogic");</code></pre>
     </div>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_a_consumer_with_a_native_query">
     <a class="anchor" href="#_using_a_consumer_with_a_native_query">
     </a>
     Using a consumer with a native query
    </h3>
    <div class="paragraph">
     <p>
      For consuming only selected entities, you can use the
      <code>
       nativeQuery
      </code>
      URI query option. You only have to define the native query option:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("jpa://org.apache.camel.examples.MultiSteps?nativeQuery=select * from MultiSteps where step = 1")
.to("bean:myBusinessLogic");</code></pre>
     </div>
    </div>
    <div class="paragraph">
     <p>
      If you use the native query option, you will receive an object array in the message body.
     </p>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_a_producer_with_a_named_query">
     <a class="anchor" href="#_using_a_producer_with_a_named_query">
     </a>
     Using a producer with a named query
    </h3>
    <div class="paragraph">
     <p>
      For retrieving selected entities or execute bulk update/delete, you can use the
      <code>
       namedQuery
      </code>
      URI query option. First, you have to define the named query in the JPA Entity class:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@NamedQuery(name = "step1", query = "select x from MultiSteps x where x.step = 1")
public class MultiSteps {
   ...
}</code></pre>
     </div>
    </div>
    <div class="paragraph">
     <p>
      After that, you can define a producer uri like this one:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:namedQuery")
.to("jpa://org.apache.camel.examples.MultiSteps?namedQuery=step1");</code></pre>
     </div>
    </div>
    <div class="paragraph">
     <p>
      Note that you need to specify
      <code>
       useExecuteUpdate
      </code>
      option to
      <code>
       true
      </code>
      to execute
      <code>
       UPDATE
      </code>
      /
      <code>
       DELETE
      </code>
      statement as a named query.
     </p>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_a_producer_with_a_query">
     <a class="anchor" href="#_using_a_producer_with_a_query">
     </a>
     Using a producer with a query
    </h3>
    <div class="paragraph">
     <p>
      For retrieving selected entities or execute bulk update/delete, you can use the
      <code>
       query
      </code>
      URI query option. You only have to define the query option:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:query")
.to("jpa://org.apache.camel.examples.MultiSteps?query=select o from org.apache.camel.examples.MultiSteps o where o.step = 1");</code></pre>
     </div>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_a_producer_with_a_native_query">
     <a class="anchor" href="#_using_a_producer_with_a_native_query">
     </a>
     Using a producer with a native query
    </h3>
    <div class="paragraph">
     <p>
      For retrieving selected entities or execute bulk update/delete, you can use the
      <code>
       nativeQuery
      </code>
      URI query option. You only have to define the native query option:
     </p>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:nativeQuery")
.to("jpa://org.apache.camel.examples.MultiSteps?resultClass=org.apache.camel.examples.MultiSteps&amp;nativeQuery=select * from MultiSteps where step = 1");</code></pre>
     </div>
    </div>
    <div class="paragraph">
     <p>
      If you use the native query option without specifying
      <code>
       resultClass
      </code>
      , you will receive an object array in the message body.
     </p>
    </div>
   </div>
   <div class="sect2">
    <h3 id="_using_the_jpa_based_idempotent_repository">
     <a class="anchor" href="#_using_the_jpa_based_idempotent_repository">
     </a>
     Using the JPA-Based Idempotent Repository
    </h3>
    <div class="paragraph">
     <p>
      The Idempotent Consumer from the
      <a href="http://camel.apache.org/enterprise-integration-patterns.html">
       EIP patterns
      </a>
      is used to filter out duplicate messages. A JPA-based idempotent repository is provided.
     </p>
    </div>
    <div class="paragraph">
     <p>
      To use the JPA based idempotent repository.
     </p>
    </div>
    <div class="olist arabic">
     <div class="title">
      Procedure
     </div>
     <ol class="arabic">
      <li>
       <p>
        Set up a
        <code>
         persistence-unit
        </code>
        in the persistence.xml file:
       </p>
      </li>
      <li>
       <p>
        Set up a
        <code>
         org.springframework.orm.jpa.JpaTemplate
        </code>
        which is used by the
        <code>
         org.apache.camel.processor.idempotent.jpa.JpaMessageIdRepository
        </code>
        :
       </p>
      </li>
      <li>
       <p>
        Configure the error formatting macro: snippet: java.lang.IndexOutOfBoundsException: Index: 20, Size: 20
       </p>
      </li>
      <li>
       <p>
        Configure the idempotent repository:
        <code>
         org.apache.camel.processor.idempotent.jpa.JpaMessageIdRepository
        </code>
        :
       </p>
      </li>
      <li>
       <p>
        Create the JPA idempotent repository in the Spring XML file:
       </p>
      </li>
     </ol>
    </div>
    <div class="listingblock">
     <div class="content">
      <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
    &lt;route id="JpaMessageIdRepositoryTest"&gt;
        &lt;from uri="direct:start" /&gt;
        &lt;idempotentConsumer idempotentRepository="jpaStore"&gt;
            &lt;header&gt;messageId&lt;/header&gt;
            &lt;to uri="mock:result" /&gt;
        &lt;/idempotentConsumer&gt;
    &lt;/route&gt;
&lt;/camelContext&gt;</code></pre>
     </div>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_important_development_notes">
   <a class="anchor" href="#_important_development_notes">
   </a>
   Important Development Notes
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     If you run the
     <a href="https://github.com/apache/camel/tree/main/components/camel-jpa/src/test">
      tests of this component
     </a>
     directly inside your IDE, and not through Maven, then you could see exceptions like these:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre>org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is
&lt;openjpa-2.2.1-r422266:1396819 nonfatal user error&gt; org.apache.openjpa.persistence.ArgumentException: This configuration disallows runtime optimization,
but the following listed types were not enhanced at build time or at class load time with a javaagent: "org.apache.camel.examples.SendEmail".
    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:427)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:127)
    at org.apache.camel.processor.jpa.JpaRouteTest.cleanupRepository(JpaRouteTest.java:96)
    at org.apache.camel.processor.jpa.JpaRouteTest.createCamelContext(JpaRouteTest.java:67)
    at org.apache.camel.test.junit5.CamelTestSupport.doSetUp(CamelTestSupport.java:238)
    at org.apache.camel.test.junit5.CamelTestSupport.setUp(CamelTestSupport.java:208)</pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     The problem here is that the source has been compiled or recompiled through your IDE and not through Maven, which would
     <a href="https://github.com/apache/camel/blob/main/components/camel-jpa/pom.xml">
      enhance the byte-code at build time
     </a>
     . To overcome this, you need to enable
     <a href="http://openjpa.apache.org/entity-enhancement.html#dynamic-enhancement">
      dynamic byte-code enhancement of OpenJPA
     </a>
     . For example, assuming the current OpenJPA version being used in Camel is 2.2.1, to run the tests inside your IDE, you would need to pass the following argument to the JVM:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre>-javaagent:&lt;path_to_your_local_m2_cache&gt;/org/apache/openjpa/openjpa/2.2.1/openjpa-2.2.1.jar</pre>
    </div>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="_spring_boot_auto_configuration">
   <a class="anchor" href="#_spring_boot_auto_configuration">
   </a>
   Spring Boot Auto-Configuration
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     When using jpa with Spring Boot make sure to use the following Maven dependency to have support for auto configuration:
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;
  &lt;artifactId&gt;camel-jpa-starter&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
  &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</code></pre>
    </div>
   </div>
   <div class="paragraph">
    <p>
     The component supports 11 options, which are listed below.
    </p>
   </div>
   <div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
     <colgroup>
      <col/>
      <col/>
      <col/>
      <col/>
     </colgroup>
     <thead>
      <tr>
       <th class="tableblock halign-left valign-top">
        Name
       </th>
       <th class="tableblock halign-left valign-top">
        Description
       </th>
       <th class="tableblock halign-center valign-top">
        Default
       </th>
       <th class="tableblock halign-left valign-top">
        Type
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_aliases">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_aliases">
         </a>
         <strong>
          camel.component.jpa.aliases
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Maps an alias to a JPA entity class. The alias can then be used in the endpoint URI (instead of the fully qualified class name).
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Map
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_autowired-enabled">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_autowired-enabled">
         </a>
         <strong>
          camel.component.jpa.autowired-enabled
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether autowiring is enabled. This is used for automatic autowiring options (the option must be marked as autowired) by looking up in the registry to find if there is a single instance of matching type, which then gets configured on the component. This can be used for automatic configuring JDBC data sources, JMS connection factories, AWS Clients, etc.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_bridge-error-handler">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_bridge-error-handler">
         </a>
         <strong>
          camel.component.jpa.bridge-error-handler
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions (if possible) occurred while the Camel consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. Important: This is only possible if the 3rd party component allows Camel to be alerted if an exception was thrown. Some components handle this internally only, and therefore bridgeErrorHandler is not possible. In other situations we may improve the Camel component to hook into the 3rd party component and make this possible for future releases. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         false
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_enabled">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_enabled">
         </a>
         <strong>
          camel.component.jpa.enabled
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether to enable auto configuration of the jpa component. This is enabled by default.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_entity-manager-factory">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_entity-manager-factory">
         </a>
         <strong>
          camel.component.jpa.entity-manager-factory
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To use the EntityManagerFactory. This is strongly recommended to configure. The option is a jakarta.persistence.EntityManagerFactory type.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         EntityManagerFactory
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_health-check-consumer-enabled">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_health-check-consumer-enabled">
         </a>
         <strong>
          camel.component.jpa.health-check-consumer-enabled
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Used for enabling or disabling all consumer based health checks from this component.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_health-check-producer-enabled">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_health-check-producer-enabled">
         </a>
         <strong>
          camel.component.jpa.health-check-producer-enabled
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Used for enabling or disabling all producer based health checks from this component. Notice: Camel has by default disabled all producer based health-checks. You can turn on producer checks globally by setting camel.health.producersEnabled=true.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_join-transaction">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_join-transaction">
         </a>
         <strong>
          camel.component.jpa.join-transaction
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         The camel-jpa component will join transaction by default. You can use this option to turn this off, for example if you use LOCAL_RESOURCE and join transaction doesn’t work with your JPA provider. This option can also be set globally on the JpaComponent, instead of having to set it on all endpoints.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         true
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_lazy-start-producer">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_lazy-start-producer">
         </a>
         <strong>
          camel.component.jpa.lazy-start-producer
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether the producer should be started lazy (on the first message). By starting lazy you can use this to allow CamelContext and routes to startup in situations where a producer may otherwise fail during starting and cause the route to fail being started. By deferring this startup to be lazy then the startup failure can be handled during routing messages via Camel’s routing error handlers. Beware that when the first message is processed then creating and starting the producer may take a little time and prolong the total processing time of the processing.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         false
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_shared-entity-manager">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_shared-entity-manager">
         </a>
         <strong>
          camel.component.jpa.shared-entity-manager
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether to use Spring’s SharedEntityManager for the consumer/producer. Note in most cases joinTransaction should be set to false as this is not an EXTENDED EntityManager.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
        <p class="tableblock">
         false
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <a id="_sb_option_camel_component_jpa_transaction-strategy">
         </a>
         <a class="anchor" href="#_sb_option_camel_component_jpa_transaction-strategy">
         </a>
         <strong>
          camel.component.jpa.transaction-strategy
         </strong>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         To use the TransactionStrategy for running the operations in a transaction. The option is a org.apache.camel.component.jpa.TransactionStrategy type.
        </p>
       </td>
       <td class="tableblock halign-center valign-top">
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         TransactionStrategy
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </div>
</article>
