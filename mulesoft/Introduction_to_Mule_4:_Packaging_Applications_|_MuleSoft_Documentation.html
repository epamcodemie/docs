<article class="doc">
 <h1 class="page">
  Introduction to Mule 4: Packaging Applications
 </h1>
 <div class="sect1">
  <h2 id="application-structure">
   <a class="anchor" href="#application-structure">
   </a>
   Application Structure
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     There are few important changes to how Mule applications are packaged in Mule 4. Mule applications are
now packaged as a JAR and have a different structure. You can use the Mule Maven Plugin to easily package your source code into this structure.
    </p>
   </div>
   <table class="tableblock frame-all grid-all stretch">
    <colgroup>
     <col style="width: 60%;"/>
     <col style="width: 40%;"/>
    </colgroup>
    <thead>
     <tr>
      <th class="tableblock halign-left valign-top">
       Location
      </th>
      <th class="tableblock halign-left valign-top">
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        <code>
         META-INF/mule-artifact/mule-artifact.json
        </code>
       </p>
      </td>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        Descriptor for your Mule application (see
        <a href="#app_descriptor">
         Application Descriptor
        </a>
        ).
       </p>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        <code>
         META-INF/mule-src/yourapp/
        </code>
       </p>
      </td>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        An optional location for your source code.
       </p>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        <code>
         repository
        </code>
       </p>
      </td>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        A repository for all your application’s dependencies in Maven layout. This  includes all your connectors for your app. For example,
        <code>
         repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar
        </code>
       </p>
      </td>
     </tr>
     <tr>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        <code>
         yourapp.xml
        </code>
       </p>
      </td>
      <td class="tableblock halign-left valign-top">
       <p class="tableblock">
        Your Mule XML code.
       </p>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
 </div>
 <div class="sect1">
  <h2 id="app_descriptor">
   <a class="anchor" href="#app_descriptor">
   </a>
   Application Descriptor
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Mule 4 applications include a
     <code>
      mule-artifact.json
     </code>
     file in
     <code>
      META-INF/mule-artifact/
     </code>
     . This describes your app, configuration settings, the required Mule version, and the class loader configuration.
    </p>
   </div>
   <div class="listingblock">
    <div class="content">
     <pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "configs": [
    "ch-usage-sync.xml"
  ],
  "redeploymentEnabled": true,
  "name": "ch-usage-sync",
  "minMuleVersion": "4.0.0",
  "requiredProduct": "MULE_EE",
  "classLoaderModelLoaderDescriptor": {
    "id": "mule",
    "attributes": {
      "exportedResources": []
    }
  },
  "bundleDescriptorLoader": {
    "id": "mule",
    "attributes": {}
  }
}</code></pre>
    </div>
   </div>
   <div class="sect2">
    <h3 id="application-descriptor-reference">
     <a class="anchor" href="#application-descriptor-reference">
     </a>
     Application Descriptor Reference
    </h3>
    <table class="tableblock frame-all grid-all stretch">
     <colgroup>
      <col style="width: 20%;"/>
      <col style="width: 20%;"/>
      <col style="width: 60%;"/>
     </colgroup>
     <thead>
      <tr>
       <th class="tableblock halign-left valign-top">
        Attribute
       </th>
       <th class="tableblock halign-left valign-top">
        Value type
       </th>
       <th class="tableblock halign-left valign-top">
        Description
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          configs
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Array of Strings
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Set of Mule configuration files.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          redeploymentEnabled
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Boolean
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Whether modifying the app configuration files will trigger a redeployment.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          name
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         String
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Meaningful name for the app.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          minMuleVersion
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         String
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Minimum Mule Runtime version required to deploy the app.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          requiredProduct
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         String
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Required product type to deploy the app.
         <code>
          MULE
         </code>
         means that the app can be deployed on the Community Edition (CE) version or the Enterprise Edition (EE) version.
         <code>
          MULE_EE
         </code>
         means that the app can only be deployed on the EE version.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          classLoaderModelLoaderDescriptor
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Object
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Descriptor of the classloading model for the app. The
         <code>
          id
         </code>
         field identifies the mechanism to be used by the runtime to understand how the dependencies and the packages/resources of the app are meant to be used. By default, Mule uses the ID
         <code>
          mule
         </code>
         , which means that the exported packages and resources from the apps are described in the
         <code>
          attributes
         </code>
         field, and the dependencies are described in the file
         <code>
          /META-INF/mule-artifact/classloader-model.json
         </code>
         .
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          bundleDescriptorLoader
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Object
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Descriptor of the app bundle coordinates. The
         <code>
          id
         </code>
         field identifies the mechanism to be used by the runtime to understand the app bundle coordinates. The default is
         <code>
          mule
         </code>
         and will load the Artifact Group ID, Artifact ID, and Version from the POM file.
        </p>
       </td>
      </tr>
      <tr>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         <code>
          secureProperties
         </code>
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Array of Strings
        </p>
       </td>
       <td class="tableblock halign-left valign-top">
        <p class="tableblock">
         Declares the set of configuration properties of the artifact that must be managed as secure in the platform.
        </p>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="application-versioning">
   <a class="anchor" href="#application-versioning">
   </a>
   Application Versioning
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     Mule Runtime follows
     <a href="https://semver.org/">
      semantic versioning
     </a>
     in all its artifacts. By following semantic versioning, clients of our APIs can clearly understand what to expect whenever MuleSoft releases a new version of an asset. For instance, consider the case of Mule connectors. You can expect bug fixes (and only bug fixes) when a patch version is updated. You can expect new features in new minor versions. Both of those changes are expected to be backward compatible so that you can upgrade without any problem. But if MuleSoft updates the major version of the connector, it means that it was necessary to break backward compatibility to include new functionality or provide a much better UX.
    </p>
   </div>
   <div class="paragraph">
    <p>
     It is also expected that Mule artifacts (app, domains, policies) follow semantic versioning, so you might encounter some validations when working with Mule apps. By following semantic versioning, Anypoint Platform can better understand new assets and provide a better experience. For instance, if there’s a new major version of a Mule domain, you can expect that there is not going to be, for instance, the same set of global components defined in it as in the previous major version. So mule apps that belong to that domain might required to be updated if the new domain is used.
    </p>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="mule-maven-plugin">
   <a class="anchor" href="#mule-maven-plugin">
   </a>
   Mule Maven Plugin
  </h2>
  <div class="sectionbody">
   <div class="paragraph">
    <p>
     The Mule Maven Plugin in Mule 4 packages your app into the required format and enables you to deploy it into your target environment. Studio 7 will automatically add the plugin to your
     <code>
      pom.xml
     </code>
     . See the Mule Maven Plugin
documentation for information on how to use it to deploy apps.
    </p>
   </div>
   <div class="admonitionblock important">
    <table>
     <tr>
      <td class="icon">
       <i class="fa icon-important" title="Important">
       </i>
      </td>
      <td class="content">
       Domains, policies, Mule artifact plugins (connectors, modules, and so on) all have the same structure as Mule apps. Depending on the type of artifact, there might be more or less properties in the artifact descriptors (
       <code>
        mule-artifact.json
       </code>
       ), but they are all similar and all must follow semantic versioning.
      </td>
     </tr>
    </table>
   </div>
  </div>
 </div>
 <div class="sect1">
  <h2 id="see-also">
   <a class="anchor" href="#see-also">
   </a>
   See Also
  </h2>
  <div class="sectionbody">
   <div class="ulist">
    <ul>
     <li>
      <p>
       <a class="xref page" href="mmp-concept#mule-application-packaging">
        Package Mule Apps using the Mule Maven Plugin
       </a>
      </p>
     </li>
     <li>
      <p>
       <a class="xref page" href="mmp-concept#mule-application-deployment">
        Deploy Mule Apps using the Mule Maven Plugin
       </a>
      </p>
     </li>
    </ul>
   </div>
  </div>
 </div>
</article>
